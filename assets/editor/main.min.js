var Hi=Object.defineProperty;var cs=Object.getOwnPropertySymbols;var Ri=Object.prototype.hasOwnProperty,Mi=Object.prototype.propertyIsEnumerable;var ds=(e,t,i)=>t in e?Hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Et=(e,t)=>{for(var i in t||(t={}))Ri.call(t,i)&&ds(e,i,t[i]);if(cs)for(var i of cs(t))Mi.call(t,i)&&ds(e,i,t[i]);return e};import{d as St,S as Xi,s as qe,V as ji}from"./vendor.min.js";function ps(e){for(var t="",i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}function le(){return ps(4)+"-"+ps(4)}function Ui(){return Math.random().toString(16).slice(7)}function At(e){e.uid=le(),e.children&&e.children.length&&e.children.forEach(t=>{At(t)})}function us(e,t){return t=t||[],t.push(e.uid),e.children&&Object.values(e.children).forEach(i=>{us(i,t)}),t}function Wi(){}var hs;hs=function(){var e=this;this.compare=function(t,i,r){switch(r){case"==":return t==i;case"!=":return t!=i;case"!==":return t!==i;case"in":return i.indexOf(t)!==-1;case"!in":return i.indexOf(t)===-1;case"contains":return t.indexOf(i)!==-1;case"!contains":return t.indexOf(i)===-1;case"<":return t<i;case"<=":return t<=i;case">":return t>i;case">=":return t>=i;default:return t===i}},this.check=function(t,i){var r=t.relation==="or",a=!r;return t=t.term||t,t.forEach(function(s,o){var n;if(s.term)n=e.check(s,i);else{var l,p,N;Array.isArray(s)?(l=s[0],p=s[1],s[2]&&(N=s[2])):(l=s.id,p=s.value,N=s.operator);var X=l.match(/(\w+)(?:\[(\w+)])?/),k=i[X[1]];X[2]&&(k=k[X[2]]),n=e.compare(k,p,N)}if(r)return n&&(a=!0),!n;if(!n)return a=!1}),a}};const ws=new hs;function _(e){return wp.i18n.__(e,"wp-configurator-pro")}function $(e){return e===void 0}function Gi(e,t=300){let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>{e.apply(this,r)},t)}}let C={};const Ki=function(e,t){e=e.split("."),C[e[0]]||(C[e[0]]={});var i=e[1]||Object.keys(C[e[0]]).length;C[e[0]][i]=t},Ji=function(e){if(!e)return C={};e=e.split("."),e[1]?delete C[e[0]][e[1]]:delete C[e[0]]},Nt=function(e,t,i){if(e=e.split("."),C[e[0]]||(C[e[0]]={}),e[1])C[e[0]][e[1]]&&(i=C[e[0]][e[1]].apply(i,t));else for(var r in C[e[0]])i=C[e[0]][r].apply(i,t);return i};var _s=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getUid:le,uuid:Ui,updateUID:At,getAllSiblings:us,savePost:Wi,conditions:ws,getTextDomain:_,isUndefined:$,debounce:Gi,addAction:Ki,removeAction:Ji,doAction:Nt});var h=(e,t)=>{const i=e.__vccOpts||e;for(const[r,a]of t)i[r]=a;return i};const qi={methods:{addLayer(e){e!=="sub_group"&&this.$store.dispatch("addLayer",{layer:this.$store.state.activeLayer,parent:this.$store.state.activeLayerCollection,layerType:e,push:!0}),e!=="group"&&this.$store.state.activeLayer.type==="group"&&(this.$store.state.activeLayer.actions.open=!0)}}},Y=window.Vue.createElementVNode,Zi=window.Vue.renderList,vs=window.Vue.Fragment,ke=window.Vue.openBlock,be=window.Vue.createElementBlock,ys=window.Vue.toDisplayString,gs=window.Vue.createCommentVNode,Qi={class:"top-toolbar-text-wrap top-toolbar-layer-wrap"},eo=Y("span",{class:"top-toolbar-icon"},[Y("span",{class:"material-icons wpc-layer-icon"},"add_box")],-1),to=Y("span",{class:"top-toolbar-text"},"Add Layer",-1),so=[eo,to],io={class:"top-toolbar-dropdown"},oo={class:"top-toolbar-dropdown-list-wrap"},ao=["onClick"],no={class:"top-toolbar-icon"},ro={class:"material-icons"},lo={class:"top-toolbar-text"},co={key:1,class:"wpc-sep-line"};function po(e,t,i,r,a,s){return ke(),be("div",Qi,[Y("div",{class:"top-toolbar-icon-wrap",onClick:t[0]||(t[0]=o=>s.addLayer("group"))},so),Y("div",io,[Y("div",oo,[(ke(!0),be(vs,null,Zi(e.$root.$options.layerTypes,(o,n)=>(ke(),be(vs,{key:n},[o.show_only?gs("",!0):(ke(),be("div",{key:0,class:"top-toolbar-dropdown-list",onClick:l=>s.addLayer(n)},[Y("span",no,[Y("span",ro,ys(o.icon),1)]),Y("span",lo,ys(o.name),1)],8,ao)),o.separator&&o.separator==!0?(ke(),be("div",co)):gs("",!0)],64))),128))])])])}var uo=h(qi,[["render",po]]);const ho=window.Vue.nextTick,wo={computed:{isHotspotActive(){return this.$store.state.activeHotspot},activeView(){return this.$store.state.activeView},activeLayer(){return this.$store.state.activeLayer},type(){return this.activeLayer.type},imageId(){return this.activeLayer.settings&&this.activeLayer.settings.views&&this.activeLayer.settings.views[this.activeView.id]&&this.activeLayer.settings.views[this.activeView.id].image?this.activeLayer.settings.views[this.activeView.id].image:!1},vAlign(){return this.hasView("align_v")?this.activeLayer.settings.views[this.activeView.id].align_v:"middle"},hAlign(){return this.hasView("align_h")?this.activeLayer.settings.views[this.activeView.id].align_h:"center"},offsetX(){return this.hasView("offset_x")?this.activeLayer.settings.views[this.activeView.id].offset_x+"px":"0px"},offsetY(){return this.hasView("offset_y")?this.activeLayer.settings.views[this.activeView.id].offset_y+"px":"0px"},order(){return this.hasView("z_index")?this.activeLayer.settings.views[this.activeView.id].z_index:""},originalWidth(){return this.imageId?this.$root.$options.editor.images[this.imageId].width:null},originalHeight(){return this.imageId?this.$root.$options.editor.images[this.imageId].height:null},width(){return this.hasView("width")?this.activeLayer.settings.views[this.activeView.id].width+"px":this.$root.$options.editor.images[this.imageId]&&this.$root.$options.editor.images[this.imageId].width?this.$root.$options.editor.images[this.imageId].width+"px":""},height(){return this.hasView("height")?this.activeLayer.settings.views[this.activeView.id].height+"px":this.$root.$options.editor.images[this.imageId]&&this.$root.$options.editor.images[this.imageId].height?this.$root.$options.editor.images[this.imageId].height+"px":""},aspectFactor(){return!this.imageId&&!this.$root.$options.editor.images[this.imageId]?1:parseFloat(this.$root.$options.editor.images[this.imageId].width)/parseFloat(this.$root.$options.editor.images[this.imageId].height)}},methods:{resetImageSize(){this.setAlign("width",this.originalWidth),this.setAlign("height",this.originalHeight)},getTextDomain(e){return _(e)},isLarger(e,t){return parseFloat(e)>parseFloat(t)},addSubInput(e,t){if(t.key!="ArrowUp"&&t.key!="ArrowDown")return;let i=0;t.key=="ArrowUp"?i=t.shiftKey?10:1:i=t.shiftKey?-10:-1;let r=parseFloat(t.target.value),a=isNaN(r)?"":r+i;a=(e==="width"||e==="height")&&a<0?"":a,this.setAlign(e,a),this.setAspectRatio(e,a),ho(()=>{t.target.select()})},hasView(e){return this.activeLayer.settings&&this.activeLayer.settings.views&&this.activeLayer.settings.views[this.activeView.id]&&this.activeLayer.settings.views[this.activeView.id][e]},setAlign(e,t){e==="align_h"?this.setAlign("offset_x",0):e==="align_v"&&this.setAlign("offset_y",0),this.$store.dispatch("updateAlignment",{prop:e,value:t})},updateInput(e,t){let i=parseFloat(t);t=isNaN(i)?"":i,this.setAlign(e,t),this.setAspectRatio(e,t)},setAspectRatio(e,t){let i,r;e=="width"?(i=t/this.height>this.aspectFactor?t*this.aspectFactor:t/this.aspectFactor,this.setAlign("height",parseFloat(i))):e=="height"&&(r=this.width/t>this.aspectFactor?t/this.aspectFactor:t*this.aspectFactor,this.setAlign("width",parseFloat(r)))}}},u=window.Vue.createElementVNode,j=window.Vue.normalizeClass,ce=window.Vue.withModifiers,U=window.Vue.openBlock,W=window.Vue.createElementBlock,de=window.Vue.createCommentVNode,Ze=window.Vue.toDisplayString,_o=window.Vue.Fragment,vo={class:"top-toolbar-inner top-toolbar-align-wrap"},yo=u("span",{class:"top-toolbar-icon material-icons"},"align_horizontal_left",-1),go=[yo],mo=u("span",{class:"top-toolbar-icon material-icons"},"align_horizontal_center",-1),fo=[mo],$o=u("span",{class:"top-toolbar-icon material-icons"},"align_horizontal_right",-1),Vo=[$o],Lo=u("div",{class:"top-toolbar-inner-break"},null,-1),ko=u("span",{class:"top-toolbar-icon material-icons"},"align_vertical_top",-1),bo=[ko],Co=u("span",{class:"top-toolbar-icon material-icons"},"align_vertical_center",-1),To=[Co],Eo=u("span",{class:"top-toolbar-icon material-icons"},"align_vertical_bottom",-1),So=[Eo],Ao={class:"top-toolbar-inner top-toolbar-position-size-value"},No={class:"position-value"},xo={class:"top-toolbar-text-wrap"},Bo={class:"top-toolbar-x-value-wrap"},Oo={class:"top-toolbar-text"},Do={for:"x"},Io=u("span",null,"X",-1),zo=["value"],Fo={class:"top-toolbar-text-wrap"},Po={class:"top-toolbar-y-value-wrap"},Yo={class:"top-toolbar-text"},Ho={for:"y"},Ro=u("span",null,"Y",-1),Mo=["value"],Xo={key:0,class:"size-value"},jo={class:"top-toolbar-text-wrap"},Uo={class:"top-toolbar-width-value-wrap"},Wo={class:"top-toolbar-text"},Go={for:"W"},Ko=u("span",null,"W",-1),Jo=["value"],qo={key:1,class:"wpc-error-info"},Zo={key:0,class:"top-toolbar-text-wrap"},Qo={class:"top-toolbar-height-value-wrap"},ea={class:"top-toolbar-text"},ta={for:"H"},sa=u("span",null,"H",-1),ia=["value"],oa={key:1,class:"wpc-error-info"},aa={key:1,class:"top-toolbar-text-wrap"},na={class:"top-toolbar-order-value-wrap"},ra={class:"top-toolbar-text"},la={for:"order"},ca=u("span",null,"Order",-1),da=["value"];function pa(e,t,i,r,a,s){return U(),W(_o,null,[u("div",vo,[u("div",{class:j(["top-toolbar-text-wrap top-toolbar-cursor",{"wpc-align-active":s.hAlign=="left"}]),onClick:t[0]||(t[0]=o=>s.setAlign("align_h","left"))},go,2),u("div",{class:j(["top-toolbar-text-wrap top-toolbar-cursor",{"wpc-align-active":s.hAlign=="center"}]),onClick:t[1]||(t[1]=o=>s.setAlign("align_h","center"))},fo,2),u("div",{class:j(["top-toolbar-text-wrap top-toolbar-cursor",{"wpc-align-active":s.hAlign=="right"}]),onClick:t[2]||(t[2]=o=>s.setAlign("align_h","right"))},Vo,2),Lo,u("div",{class:j(["top-toolbar-text-wrap top-toolbar-cursor",{"wpc-align-active":s.vAlign=="top"}]),onClick:t[3]||(t[3]=o=>s.setAlign("align_v","top"))},bo,2),u("div",{class:j(["top-toolbar-text-wrap top-toolbar-cursor",{"wpc-align-active":s.vAlign=="middle"}]),onClick:t[4]||(t[4]=o=>s.setAlign("align_v","middle"))},To,2),u("div",{class:j(["top-toolbar-text-wrap top-toolbar-cursor",{"wpc-align-active":s.vAlign=="bottom"}]),onClick:t[5]||(t[5]=o=>s.setAlign("align_v","bottom"))},So,2)]),u("div",Ao,[u("div",No,[u("div",xo,[u("div",Bo,[u("span",Oo,[u("label",Do,[Io,u("input",{type:"text",class:"textfield",value:s.offsetX,onChange:t[6]||(t[6]=o=>s.updateInput("offset_x",o.target.value)),onKeydown:t[7]||(t[7]=ce(o=>s.addSubInput("offset_x",o),["stop"]))},null,40,zo)])])])]),u("div",Fo,[u("div",Po,[u("span",Yo,[u("label",Ho,[Ro,u("input",{type:"text",class:"textfield",value:s.offsetY,onChange:t[8]||(t[8]=o=>s.updateInput("offset_y",o.target.value)),onKeydown:t[9]||(t[9]=ce(o=>s.addSubInput("offset_y",o),["stop"]))},null,40,Mo)])])])])]),s.isHotspotActive?de("",!0):(U(),W("div",Xo,[u("div",jo,[u("div",Uo,[u("span",Wo,[u("label",Go,[Ko,u("input",{type:"text",class:j(["textfield",{"wpc-input-error":s.isLarger(s.width,s.originalWidth)}]),value:s.width,onChange:t[10]||(t[10]=o=>s.updateInput("width",o.target.value)),onKeydown:t[11]||(t[11]=ce(o=>s.addSubInput("width",o),["stop"]))},null,42,Jo)]),parseFloat(s.width)!==s.originalWidth?(U(),W("span",{key:0,class:"wpc-error-icon material-icons",onClick:t[12]||(t[12]=ce((...o)=>s.resetImageSize&&s.resetImageSize(...o),["stop"]))},"rotate_right")):de("",!0),s.isLarger(s.width,s.originalWidth)?(U(),W("span",qo,Ze(s.getTextDomain("Current width is larger than original width:"))+" ("+Ze(s.originalWidth)+"px)",1)):de("",!0)])])]),s.isHotspotActive?de("",!0):(U(),W("div",Zo,[u("div",Qo,[u("span",ea,[u("label",ta,[sa,u("input",{type:"text",class:j(["textfield",{"wpc-input-error":s.isLarger(s.height,s.originalHeight)}]),value:s.height,onChange:t[13]||(t[13]=o=>s.updateInput("height",o.target.value)),onKeydown:t[14]||(t[14]=ce(o=>s.addSubInput("height",o),["stop"]))},null,42,ia)]),parseFloat(s.height)!==s.originalHeight?(U(),W("span",{key:0,class:"wpc-error-icon material-icons",onClick:t[15]||(t[15]=ce((...o)=>s.resetImageSize&&s.resetImageSize(...o),["stop"]))}," rotate_right ")):de("",!0),s.isLarger(s.height,s.originalHeight)?(U(),W("span",oa,Ze(s.getTextDomain("Current height is larger than original height"))+" ("+Ze(s.originalHeight)+"px)",1)):de("",!0)])])])),s.isHotspotActive?de("",!0):(U(),W("div",aa,[u("div",na,[u("span",ra,[u("label",la,[ca,u("input",{type:"text",class:"textfield",value:s.order,onChange:t[16]||(t[16]=o=>s.updateInput("z_index",o.target.value)),onKeydown:t[17]||(t[17]=ce(o=>s.addSubInput("z_index",o),["stop"]))},null,40,da)])])])]))]))])],64)}var ua=h(wo,[["render",pa]]);const ha=window.Vue.nextTick,wa={components:{draggable:St},data(){return{adding:!1,editing:!1}},computed:{dragOptions(){return{animation:200,group:"layer-views",ghostClass:"ghost"}},activeView:{get(){return this.$store.state.activeView},set(e){this.$store.state.activeView=e}},getViews:{get(){return this.$store.state.views},set(e){this.$store.dispatch("updateView",e)}},getViewsLength(){return this.getViews.length}},methods:{setActiveView(e){this.activeView=e},setEditView(e){this.editing=e.id,ha(()=>{this.$refs.editView.focus()})},editView(e,t){this.editing=!1,!!t&&this.$store.dispatch("editView",{element:e,value:t})},deleteView(e){this.getViewsLength<=1||!confirm(wp.i18n.__("Are you sure? All the layer data related to this view will be removed","wp-configurator-pro"))||this.$store.dispatch("deleteView",{element:e,views:this.getViews})}}},T=window.Vue.createElementVNode,ms=window.Vue.toDisplayString,Qe=window.Vue.openBlock,et=window.Vue.createElementBlock,xt=window.Vue.createCommentVNode,fs=window.Vue.withKeys,$s=window.Vue.withModifiers,Vs=window.Vue.normalizeClass,_a=window.Vue.resolveComponent,va=window.Vue.mergeProps,ya=window.Vue.withCtx,ga=window.Vue.createVNode,ma={class:"top-toolbar-text-wrap top-toolbar-view-wrap"},fa=T("span",{class:"top-toolbar-icon"},[T("span",{class:"material-icons wpc-view-icon"},"photo_size_select_small")],-1),$a={class:"top-toolbar-text"},Va=T("span",{class:"top-toolbar-text"},"View: ",-1),La={class:"top-toolbar-text"},ka=["onClick"],ba=T("span",{class:"material-icons wpc-top-drag-icon"},"drag_indicator",-1),Ca={key:0,class:"top-toolbar-text"},Ta={key:1,class:"wpc-layer-title-input"},Ea=["value","onBlur"],Sa={class:"toolbar-layer-control"},Aa=["onClick"],Na=["onClick"],xa=T("div",{class:"top-toolbar-add-btn"},[T("span",{class:"top-toolbar-text"},"Add View(Pro)")],-1);function Ba(e,t,i,r,a,s){const o=_a("draggable");return Qe(),et("div",ma,[fa,T("span",$a,[Va,T("span",La,ms(s.activeView.name),1)]),T("div",{class:Vs(["top-toolbar-dropdown",!(a.editing||a.adding)||"wpc-editing-view"])},[ga(o,va({modelValue:s.getViews,"onUpdate:modelValue":t[3]||(t[3]=n=>s.getViews=n),"item-key":"id",tag:"div",class:"top-toolbar-dropdown-list-wrap"},s.dragOptions),{item:ya(({element:n})=>[T("div",{class:Vs(["top-toolbar-dropdown-list",n.id!==s.activeView.id||"wpc-active-view"]),onClick:$s(l=>s.setActiveView(n),["stop"])},[ba,a.editing!=n.id?(Qe(),et("span",Ca,ms(n.name),1)):xt("",!0),a.editing==n.id?(Qe(),et("span",Ta,[T("input",{type:"text",ref:"editView",value:n.name,onBlur:l=>s.editView(n,l.target.value),onFocus:t[0]||(t[0]=l=>l.target.select()),onKeyup:[t[1]||(t[1]=fs(l=>a.editing=!1,["enter"])),t[2]||(t[2]=fs(l=>{e.$refs.addView.value="",a.adding=!1},["esc"]))]},null,40,Ea)])):xt("",!0),T("div",Sa,[T("span",{class:"layer-edit-icon material-icons",onClick:l=>s.setEditView(n)},"edit",8,Aa),s.getViewsLength>1?(Qe(),et("span",{key:0,class:"layer-delete-icon material-icons",onClick:$s(l=>s.deleteView(n),["stop"])},"delete_outline",8,Na)):xt("",!0)])],10,ka)]),_:1},16,["modelValue"]),xa],2)])}var Oa=h(wa,[["render",Ba]]);const Da={computed:{canUndo(){return this.$root.canUndo},canRedo(){return this.$root.canRedo},redoList(){return Array.from(this.$root.undone).reverse()},undoList(){return this.$root.done}},methods:{undo(){this.$root.undo()},redo(){this.$root.redo()},undoUpto(e){for(let t=0;t<=e;t++)this.$root.undo()},redoUpto(e){e=this.$root.undone.length-e;for(let i=0;i<e;i++)this.$root.redo()}}},y=window.Vue.createElementVNode,Ls=window.Vue.createTextVNode,ks=window.Vue.normalizeClass,bs=window.Vue.renderList,Cs=window.Vue.Fragment,Ce=window.Vue.openBlock,Te=window.Vue.createElementBlock,Ts=window.Vue.toDisplayString,Ia={class:"top-toolbar-text-wrap top-toolbar-cursor"},za={class:"top-toolbar-loop-wrap"},Fa=y("span",{class:"top-toolbar-icon wpc-loop-icon"},[y("span",{class:"material-icons"},"history")],-1),Pa={class:"top-toolbar-dropdown history-dropdown"},Ya={class:"top-toolbar-dropdown-list-wrap"},Ha=y("span",{class:"top-toolbar-icon"},[y("span",{class:"material-icons"},"undo")],-1),Ra=y("span",{class:"top-toolbar-text"},[Ls("Undo "),y("span",{class:"undo-redo-shortcut"},"ctrl Z")],-1),Ma=[Ha,Ra],Xa=y("span",{class:"top-toolbar-icon"},[y("span",{class:"material-icons"},"redo")],-1),ja=y("span",{class:"top-toolbar-text"},[Ls("Redo "),y("span",{class:"undo-redo-shortcut"},"ctrl Y")],-1),Ua=[Xa,ja],Wa={class:"top-toolbar-dropdown-list-wrap top-toolbar-dropdown-history-lists"},Ga=y("div",{class:"top-toolbar-dropdown-list history-title"},[y("span",{class:"top-toolbar-text"},"History")],-1),Ka=["onClick"],Ja=y("span",{class:"top-toolbar-icon"},[y("span",{class:"material-icons"}," settings ")],-1),qa=["title"],Za=["onClick"],Qa=y("span",{class:"top-toolbar-icon"},[y("span",{class:"material-icons"}," settings ")],-1),en=["title"];function tn(e,t,i,r,a,s){return Ce(),Te("div",Ia,[y("div",za,[Fa,y("div",Pa,[y("div",Ya,[y("div",{class:ks(["top-toolbar-dropdown-list",{disabled:!s.canUndo}]),onClick:t[0]||(t[0]=(...o)=>s.undo&&s.undo(...o))},Ma,2),y("div",{class:ks(["top-toolbar-dropdown-list",{disabled:!s.canRedo}]),onClick:t[1]||(t[1]=(...o)=>s.redo&&s.redo(...o))},Ua,2)]),y("div",Wa,[Ga,(Ce(!0),Te(Cs,null,bs(s.redoList,(o,n)=>(Ce(),Te("div",{class:"top-toolbar-dropdown-list history-redo-list",key:o.uid,onClick:l=>s.redoUpto(n)},[Ja,y("span",{class:"top-toolbar-text history-text",title:o.name},Ts(o.name),9,qa)],8,Ka))),128)),(Ce(!0),Te(Cs,null,bs(s.undoList,(o,n)=>(Ce(),Te("div",{class:"top-toolbar-dropdown-list history-undo-list",key:o.uid,onClick:l=>s.undoUpto(n)},[Qa,y("span",{class:"top-toolbar-text history-text",title:o.name},Ts(o.name),9,en)],8,Za))),128))])])])])}var sn=h(Da,[["render",tn]]);const on={computed:{hasHotspot(){return this.$store.state.activeLayer.settings&&this.$store.state.activeLayer.settings.views&&this.$store.state.activeLayer.settings.views[this.$store.state.activeView.id]&&this.$store.state.activeLayer.settings.views[this.$store.state.activeView.id].hs_enable==!0},hotspotText(){return this.$store.state.showHotspots?_("Hide All Hotspots"):_("Show All Hotspots")},isParentLayer(){return this.$store.state.activeLayer.type=="group"}}},L=window.Vue.createElementVNode,tt=window.Vue.openBlock,st=window.Vue.createElementBlock,Bt=window.Vue.createCommentVNode,an=window.Vue.Fragment,nn=window.Vue.toDisplayString,rn=["title"],ln=L("div",{class:"top-toolbar-icon-wrap"},[L("span",{class:"top-toolbar-icon"},[L("span",{class:"material-icons wpc-hotspot-icon"},"track_changes")]),L("span",{class:"top-toolbar-text"},"Hotspot")],-1),cn={class:"top-toolbar-dropdown"},dn={class:"top-toolbar-dropdown-list-wrap"},pn={key:0,class:"top-toolbar-dropdown-list"},un=L("span",{class:"top-toolbar-icon"},[L("span",{class:"material-icons"},"add_to_photos")],-1),hn=L("span",{class:"top-toolbar-text"},"Add Hotspot(Pro)",-1),wn=[un,hn],_n={key:1,class:"top-toolbar-dropdown-list"},vn=L("span",{class:"top-toolbar-icon"},[L("span",{class:"material-icons"},"delete_outline")],-1),yn=L("span",{class:"top-toolbar-text"},"Remove Hotspot",-1),gn=[vn,yn],mn=L("div",{class:"wpc-sep-line"},null,-1),fn={class:"top-toolbar-dropdown-list"},$n=L("span",{class:"top-toolbar-icon"},[L("span",{class:"material-icons"},"visibility_off")],-1);function Vn(e,t,i,r,a,s){return tt(),st("div",{class:"top-toolbar-text-wrap top-toolbar-hotspot-wrap",title:s.isParentLayer||"Hotspot can be only applied to group or Sub group"},[ln,L("div",cn,[L("div",dn,[e.$store.state.activeLayer.type=="group"?(tt(),st(an,{key:0},[s.hasHotspot?Bt("",!0):(tt(),st("div",pn,wn)),s.hasHotspot?(tt(),st("div",_n,gn)):Bt("",!0),mn],64)):Bt("",!0),L("div",fn,[$n,L("span",{class:"top-toolbar-text",onClick:t[0]||(t[0]=o=>e.$store.state.showHotspots=!e.$store.state.showHotspots)},nn(s.hotspotText),1)])])])],8,rn)}var Ln=h(on,[["render",Vn]]);const Es=window.Vue.nextTick,kn={data(){return{icon:"",editing:!1}},computed:{activeLayer(){return this.$store.state.activeLayer},hadLockedLayers(){return this.$store.state.lockedLayers.length},lockedLayers(){return this.$store.state.lockedLayers},lockLayersText(){return this.$store.state.showOnlyLockLayers?_("Show All Layers"):_("Only Show Locked layers")},lockText(){return this.$store.state.lockedLayers.includes(this.$store.state.activeLayer.uid)?_("Unlock Selected Layer"):_("Lock Selected Layer")},showLayersText(){return this.$store.state.showOnlyActiveLayers?_("Show All Layers"):_("Only Show Active layers")},visibilityText(){return this.$store.state.hiddenLayers.includes(this.$store.state.activeLayer.uid)?_("Show Selected Layer"):_("Hide Selected Layer")},hadHiddenLayers(){return this.$store.state.hiddenLayers.length},hiddenLayers(){return this.$store.state.hiddenLayers},getIcon(){return this.$root.$options.layerTypes[this.activeLayer.type]&&this.$root.$options.layerTypes[this.activeLayer.type].icon?this.$root.$options.layerTypes[this.activeLayer.type].icon:this.icon},allowDelete(){let e=this.$store.state.layers.length;return 1<e}},methods:{editingLayer(){this.editing=!0,Es(()=>{this.$refs.layerName.focus()})},updateLayerName(e){this.$store.dispatch("updateLayerName",{layer:this.$store.state.activeLayer,name:e.target.value})},duplicateLayer(){this.$store.dispatch("duplicateLayer",{layer:this.$store.state.activeLayer,parent:this.$store.state.activeLayerCollection})},deleteLayer(){this.$store.dispatch("deleteLayer",{layer:this.$store.state.activeLayer,parent:this.$store.state.activeLayerCollection})},toggleShowOnlyLockLayers(){this.$store.dispatch("toggleShowOnlyLockLayers")},toggleLock(e){this.$store.dispatch("toggleLock",{layerUid:e})},setAllLayerUnlocked(){this.$store.dispatch("setAllLayerUnlocked")},toggleShowOnlyActiveLayers(){this.$store.dispatch("toggleShowOnlyActiveLayers")},toggleVisibility(e){this.$store.dispatch("toggleVisibility",{layerUid:e})},setAllLayerVisible(){this.$store.dispatch("setAllLayerVisible")},getTextDomain:_},beforeMount(){Es(()=>{this.icon=this.$root.$options.layerTypes[this.activeLayer.type].icon})}},B=window.Vue.toDisplayString,c=window.Vue.createElementVNode,O=window.Vue.openBlock,D=window.Vue.createElementBlock,Ee=window.Vue.createCommentVNode,bn=window.Vue.withKeys,Ss=window.Vue.renderList,As=window.Vue.Fragment,Cn={class:"top-toolbar-inner top-toolbar-icon-wrap"},Tn={class:"top-toolbar-text-wrap top-toolbar-layer-name-wrap"},En={class:"top-toolbar-icon"},Sn={class:"material-icons wpc-layer-name-icon"},An={key:0,class:"top-toolbar-text"},Nn={key:1,class:"wpc-layer-title-input"},xn=["value"],Bn={class:"top-toolbar-text-wrap top-toolbar-cursor"},On={class:"top-toolbar-edit-wrap"},Dn=c("span",{class:"material-icons"},"edit",-1),In=[Dn],zn={class:"top-toolbar-text-wrap top-toolbar-cursor"},Fn={class:"top-toolbar-duplicate-wrap"},Pn=c("span",{class:"material-icons"},"content_copy",-1),Yn=[Pn],Hn={key:0,class:"top-toolbar-text-wrap top-toolbar-cursor"},Rn={class:"top-toolbar-delete-wrap"},Mn=c("span",{class:"material-icons"},"delete_outline",-1),Xn=[Mn],jn={class:"top-toolbar-text-wrap top-toolbar-cursor"},Un={class:"top-toolbar-lock-wrap"},Wn={class:"top-toolbar-icon wpc-lock-icon"},Gn=c("span",{class:"material-icons"},"lock",-1),Kn={class:"top-toolbar-dropdown"},Jn={class:"top-toolbar-dropdown-list-wrap"},qn=c("span",{class:"top-toolbar-icon"},[c("span",{class:"material-icons"},"folder")],-1),Zn={class:"top-toolbar-text"},Qn=c("span",{class:"top-toolbar-icon"},[c("span",{class:"material-icons"},"image")],-1),er={class:"top-toolbar-text"},tr=c("span",{class:"top-toolbar-icon"},[c("span",{class:"material-icons"},"format_size")],-1),sr=c("span",{class:"top-toolbar-text"},"Set All Layers Unlocked",-1),ir=[tr,sr],or={key:0,class:"top-toolbar-dropdown-list-wrap"},ar={class:"top-toolbar-dropdown-list history-title"},nr={class:"top-toolbar-text"},rr=["onClick"],lr=c("span",{class:"top-toolbar-icon"},[c("span",{class:"material-icons"},"image")],-1),cr={class:"top-toolbar-text"},dr=c("span",{class:"material-icons"},"close",-1),pr={class:"top-toolbar-text-wrap top-toolbar-cursor"},ur={class:"top-toolbar-eye-wrap"},hr=c("span",{class:"top-toolbar-icon wpc-eye-icon"},[c("span",{class:"material-icons material-icons-oulined"},"visibility")],-1),wr={class:"top-toolbar-dropdown"},_r={class:"top-toolbar-dropdown-list-wrap"},vr=c("span",{class:"top-toolbar-icon"},[c("span",{class:"material-icons"},"folder")],-1),yr={class:"top-toolbar-text"},gr=c("span",{class:"top-toolbar-icon"},[c("span",{class:"material-icons"},"image")],-1),mr={class:"top-toolbar-text"},fr=c("span",{class:"top-toolbar-icon"},[c("span",{class:"material-icons"},"format_size")],-1),$r=c("span",{class:"top-toolbar-text"},"Set All Layers Visible",-1),Vr=[fr,$r],Lr={key:0,class:"top-toolbar-dropdown-list-wrap"},kr={class:"top-toolbar-dropdown-list history-title"},br={class:"top-toolbar-text"},Cr=["onClick"],Tr=c("span",{class:"top-toolbar-icon"},[c("span",{class:"material-icons"},"image")],-1),Er={class:"top-toolbar-text"},Sr=c("span",{class:"material-icons"},"close",-1);function Ar(e,t,i,r,a,s){return O(),D("div",Cn,[c("div",Tn,[c("span",En,[c("span",Sn,B(s.getIcon),1)]),a.editing?Ee("",!0):(O(),D("span",An,B(e.$store.state.activeLayer.name),1)),a.editing?(O(),D("span",Nn,[c("input",{type:"text",value:e.$store.state.activeLayer.name,onChange:t[0]||(t[0]=(...o)=>s.updateLayerName&&s.updateLayerName(...o)),ref:"layerName",onBlur:t[1]||(t[1]=o=>a.editing=!1),onKeyup:t[2]||(t[2]=bn(o=>a.editing=!1,["enter"]))},null,40,xn)])):Ee("",!0)]),c("div",Bn,[c("div",On,[c("span",{class:"top-toolbar-icon wpc-layer-edit-icon",onClick:t[3]||(t[3]=(...o)=>s.editingLayer&&s.editingLayer(...o))},In)])]),c("div",zn,[c("div",Fn,[c("span",{class:"top-toolbar-icon wpc-duplicate-icon",onClick:t[4]||(t[4]=(...o)=>s.duplicateLayer&&s.duplicateLayer(...o))},Yn)])]),s.allowDelete?(O(),D("div",Hn,[c("div",Rn,[c("span",{class:"top-toolbar-icon wpc-delete-icon",onClick:t[5]||(t[5]=(...o)=>s.deleteLayer&&s.deleteLayer(...o))},Xn)])])):Ee("",!0),c("div",jn,[c("div",Un,[c("span",Wn,[Gn,c("div",Kn,[c("div",Jn,[c("div",{class:"top-toolbar-dropdown-list",onClick:t[6]||(t[6]=(...o)=>s.toggleShowOnlyLockLayers&&s.toggleShowOnlyLockLayers(...o))},[qn,c("span",Zn,B(s.lockLayersText),1)]),c("div",{class:"top-toolbar-dropdown-list",onClick:t[7]||(t[7]=o=>s.toggleLock(e.$store.state.activeLayer.uid))},[Qn,c("span",er,B(s.lockText),1)]),c("div",{class:"top-toolbar-dropdown-list",onClick:t[8]||(t[8]=(...o)=>s.setAllLayerUnlocked&&s.setAllLayerUnlocked(...o))},ir)]),s.hadLockedLayers?(O(),D("div",or,[c("div",ar,[c("span",nr,B(s.getTextDomain("Locked Layers")),1)]),(O(!0),D(As,null,Ss(s.lockedLayers,o=>(O(),D("div",{class:"top-toolbar-dropdown-list",onClick:n=>s.toggleLock(o)},[lr,c("span",cr,B(e.$store.state.simplifiedLayers[o].item.name),1),dr],8,rr))),256))])):Ee("",!0)])])])]),c("div",pr,[c("div",ur,[hr,c("div",wr,[c("div",_r,[c("div",{class:"top-toolbar-dropdown-list",onClick:t[9]||(t[9]=(...o)=>s.toggleShowOnlyActiveLayers&&s.toggleShowOnlyActiveLayers(...o))},[vr,c("span",yr,B(s.showLayersText),1)]),c("div",{class:"top-toolbar-dropdown-list",onClick:t[10]||(t[10]=o=>s.toggleVisibility(e.$store.state.activeLayer.uid))},[gr,c("span",mr,B(s.visibilityText),1)]),c("div",{class:"top-toolbar-dropdown-list",onClick:t[11]||(t[11]=(...o)=>s.setAllLayerVisible&&s.setAllLayerVisible(...o))},Vr)]),s.hadHiddenLayers?(O(),D("div",Lr,[c("div",kr,[c("span",br,B(s.getTextDomain("Hidden Layers")),1)]),(O(!0),D(As,null,Ss(s.hiddenLayers,o=>(O(),D("div",{class:"top-toolbar-dropdown-list",onClick:n=>s.toggleVisibility(o)},[Tr,c("span",Er,B(e.$store.state.simplifiedLayers[o].item.name),1),Sr],8,Cr))),256))])):Ee("",!0)])])])])}var Nr=h(kn,[["render",Ar]]);const Ot=window.Vue.toRaw,xr={components:{addLayer:uo,layerViews:Oa,alignment:ua,HistoryList:sn,Hotspot:Ln,ActiveLayer:Nr},data(){return{loading:!1,dashboard_url:wpc.editor.dashboard_url,edit_page_url:wpc.editor.edit_page_url,preview_url:wpc.editor.preview_url,duplicate_post_url:wpc.editor.duplicate_post_url,permalink:wpc.editor.permalink,saveBtnText:this.$store.state.saveBtnText}},computed:{globalSettingsKey(){let e=[],t=this.$root.$options.editor.tabs.global_controls;return Object.keys(t).forEach(i=>{e=Object.keys(t[i].settings)}),e},showAlignment(){let e=this.$store.state.activeLayer.type;return e==="group"?!1:e&&wpc.editor.defaults.layers_types&&wpc.editor.defaults.layers_types[e]&&wpc.editor.defaults.layers_types[e]["allow-align"]?wpc.editor.defaults.layers_types[e]["allow-align"]:!1},isHotspotActive(){return this.$store.state.activeHotspot},draftText(){return _("Save as Draft")},previewText(){return _("Preview")},viewPageText(){return _("View Page")},extraToolbarIcons(){return wpc.editor.toolbar_icons}},mounted(){window.wpcEditorUtils.savePost=e=>{this.saveData(e)}},methods:{saveData(e="draft"){let t=this;t.loading=!0;let i=wpc.editor.post_id,r=this.$store.state.title,a=$(this.$store.state.views)?!1:Ot(this.$store.state.views),s=$(this.$store.state.layers)?!1:JSON.stringify(this.$store.state.layers),o=$(this.$store.state.settings.global_controls)?!1:Ot(this.$store.state.settings.global_controls),n=$(this.$store.state.settings.css_js_controls)?!1:Ot(this.$store.state.settings.css_js_controls),l=JSON.stringify(this.$root.$options.editor.images),p=wpc.editor._nonce,N=wpc.editor.data_version,X={};Nt("wpcEditorAddMeta",[X]);let k=Object.keys(o);this.globalSettingsKey.forEach(Le=>{k.includes(Le)||(o[Le]="")}),o._wpc_config_style="accordion",o._wpc_configurator_template="",o._wpc_contact_form="0",o._wpc_form="quote-form",o._wpc_load_configurator_in="",o._wpc_product_id="",o=JSON.stringify(Et(Et({},o),X)),n._wpc_custom_js="",n._wpc_custom_css="",jQuery.ajax({type:"post",url:ajaxurl,cache:!1,data:{action:"wpc_update_post",nonce:p,id:i,title:r,components:s,post_meta:o,css_js_settings:n,images:l,views:a,status:e,data_version:N},beforeSend:function(){},complete:function(){}}).done(function(Le){let ls=JSON.parse(Le);ls.error||(t.saveBtnText=ls.btn_text),t.loading=!1}).always(function(){})},startTour(){this.$tours.configTour.start()},toolbarIconAction(e){Nt(e)}}},d=window.Vue.createElementVNode,fe=window.Vue.resolveComponent,Se=window.Vue.createVNode,it=window.Vue.openBlock,Br=window.Vue.createBlock,Or=window.Vue.createCommentVNode,Dr=window.Vue.renderList,Ir=window.Vue.Fragment,Dt=window.Vue.createElementBlock,Ae=window.Vue.toDisplayString,ot=window.Vue.withModifiers,zr=window.Vue.createTextVNode,Fr=window.Vue.normalizeClass,Pr={class:"top-toolbar"},Yr={class:"top-toolbar-inner"},Hr={id:"wp-editor-logo-wrap"},Rr=["href"],Mr=d("span",{id:"wp-editor-logo"},null,-1),Xr=[Mr],jr={class:"top-toolbar-text-wrap top-toolbar-back-wrap"},Ur=["href"],Wr=d("span",{class:"top-toolbar-icon"},[d("span",{class:"material-icons wpc-back-icon"},"arrow_back")],-1),Gr=d("span",{class:"top-toolbar-text"},"Back",-1),Kr=[Wr,Gr],Jr={class:"top-toolbar-inner top-toolbar-right-side"},qr={class:"top-toolbar-start-tour-wrap"},Zr=["onClick"],Qr={class:"top-toolbar-icon"},el={class:"material-icons"},tl={class:"top-toolbar-text-wrap"},sl={class:"top-toolbar-duplicate-wrap"},il=["href"],ol=d("span",{class:"top-toolbar-icon"},[d("span",{class:"material-icons"},"content_copy")],-1),al=[ol],nl={class:"top-toolbar-text-wrap top-toolbar-cursor"},rl={class:"top-toolbar-start-tour-wrap"},ll=d("span",{class:"top-toolbar-icon"},[d("span",{class:"material-icons"},"contact_support")],-1),cl=[ll],dl=d("span",{class:"top-toolbar-icon wpc-save-icon"},[d("span",{class:"material-icons material-icons-oulined"},"save")],-1),pl={class:"top-toolbar-dropdown save-dropdown"},ul={class:"top-toolbar-dropdown-list-wrap"},hl={class:"top-toolbar-dropdown-list save-as-draft"},wl=d("span",{class:"top-toolbar-icon"},[d("span",{class:"material-icons material-icons-oulined"},"save")],-1),_l={class:"top-toolbar-dropdown-list preview-page"},vl=d("span",{class:"top-toolbar-icon"},[d("span",{class:"material-icons"})],-1),yl={class:"top-toolbar-text"},gl=["href"],ml=zr(" / "),fl=["href"],$l={class:"top-toolbar-text"},Vl=d("span",{class:"wpc-update-loading"},[d("span"),d("span"),d("span")],-1);function Ll(e,t,i,r,a,s){const o=fe("add-layer"),n=fe("layer-views"),l=fe("hotspot"),p=fe("active-layer"),N=fe("alignment"),X=fe("history-list");return it(),Dt("div",Pr,[d("div",Yr,[d("div",Hr,[d("a",{href:a.dashboard_url},Xr,8,Rr)]),d("div",jr,[d("a",{href:a.edit_page_url},Kr,8,Ur)]),Se(o),Se(n),Se(l)]),Se(p),s.showAlignment||s.isHotspotActive?(it(),Br(N,{key:0})):Or("",!0),d("div",Jr,[(it(!0),Dt(Ir,null,Dr(s.extraToolbarIcons,k=>(it(),Dt("div",{class:"top-toolbar-text-wrap top-toolbar-cursor",key:k.id},[d("div",qr,[d("span",{onClick:ot(Le=>s.toolbarIconAction(k.id),["stop"])},[d("span",Qr,[d("span",el,Ae(k.icon),1)])],8,Zr)])]))),128)),Se(X),d("div",tl,[d("div",sl,[d("a",{href:a.duplicate_post_url},al,8,il)])]),d("div",nl,[d("div",rl,[d("span",{onClick:t[0]||(t[0]=(...k)=>s.startTour&&s.startTour(...k))},cl)])]),d("div",{class:"top-toolbar-text-wrap top-toolbar-cursor",onClick:t[3]||(t[3]=ot(k=>s.saveData("publish"),["stop"]))},[d("div",{class:Fr(["top-toolbar-save-wrap",a.loading?"wpc-loading":""])},[dl,d("div",pl,[d("div",ul,[d("div",hl,[wl,d("span",{class:"top-toolbar-text",onClick:t[1]||(t[1]=ot(k=>s.saveData("draft"),["stop"]))},Ae(s.draftText),1)]),d("div",_l,[vl,d("span",yl,[d("a",{href:a.preview_url},Ae(s.previewText),9,gl),ml,d("a",{href:a.permalink},Ae(s.viewPageText),9,fl)])])]),d("div",{class:"top-toolbar-save-publish",onClick:t[2]||(t[2]=ot(k=>s.saveData("publish"),["stop"]))},[d("span",$l,[d("span",null,Ae(a.saveBtnText),1),Vl])])])],2)])])])}var kl=h(xr,[["render",Ll]]);const bl=window.Vue.nextTick,Cl={components:{},data(){return{editing:!1}},computed:{title(){return this.$store.state.title}},methods:{editTitle(){this.editing=!0,bl(()=>{this.$refs.title.focus()})},updateTitle(e){this.$store.dispatch("updateTitle",{title:e.target.value})}}},Tl=window.Vue.toDisplayString,It=window.Vue.openBlock,zt=window.Vue.createElementBlock,Ns=window.Vue.createCommentVNode,El=window.Vue.withKeys,$e=window.Vue.createElementVNode,Sl=window.Vue.withModifiers,Al=window.Vue.createTextVNode,Nl=window.Vue.resolveComponent,xl=window.Vue.createVNode,Bl={id:"wpc-left-sidebar"},Ol={class:"wpc-config-layer-title"},Dl=Al(" Title: "),Il={key:0,class:"wpc-config-title"},zl={key:1,class:"wpc-config-title-input"},Fl=["value"],Pl=$e("h3",{class:"wpc-layer-wrap"},"Layers",-1),Yl={class:"wpc-group-list-con"};function Hl(e,t,i,r,a,s){const o=Nl("layers");return It(),zt("div",Bl,[$e("div",Ol,[$e("h2",null,[Dl,a.editing?Ns("",!0):(It(),zt("span",Il,Tl(s.title),1)),a.editing?(It(),zt("span",zl,[$e("input",{type:"text",ref:"title",value:s.title,onChange:t[0]||(t[0]=(...n)=>s.updateTitle&&s.updateTitle(...n)),onBlur:t[1]||(t[1]=n=>a.editing=!1),onKeyup:t[2]||(t[2]=El(n=>a.editing=!1,["enter"])),onFocus:t[3]||(t[3]=n=>n.target.select())},null,40,Fl)])):Ns("",!0),$e("span",{class:"material-icons",onClick:t[4]||(t[4]=Sl(n=>s.editTitle(),["stop"]))},"edit")])]),Pl,$e("div",Yl,[xl(o,{layers:!1})])])}var Rl=h(Cl,[["render",Hl]]);const Ml={props:{layer:Object,view:Object},computed:{isDraggable(){return this.layer.uid===this.$store.state.activeLayer.uid&&!this.$store.state.lockedLayers.includes(this.layer.uid)},isHotspotActive(){return this.$store.state.activeHotspot},activeView(){return this.$store.state.activeView},cavasWidth(){return this.$store.state.canvasRect.width},canvasHeight(){return this.$store.state.canvasRect.height},src(){return this.layer.settings&&this.layer.settings.views&&this.layer.settings.views[this.view.id]&&this.layer.settings.views[this.view.id].image&&this.$root.$options.editor.images[this.layer.settings.views[this.view.id].image]?this.$root.$options.editor.images[this.layer.settings.views[this.view.id].image].src:!1},imageId(){return this.layer.settings&&this.layer.settings.views&&this.layer.settings.views[this.view.id]&&this.layer.settings.views[this.view.id].image?this.layer.settings.views[this.view.id].image:!1},originalWidth(){return this.imageId?this.$root.$options.editor.images[this.imageId].width:null},originalHeight(){return this.imageId?this.$root.$options.editor.images[this.imageId].height:null},getLeft(){let e,t=this.width,i=this.cavasWidth;if(this.hAlign=="center"){let r=(i-t)/2,a=isNaN(parseFloat(this.offsetX))?0:parseFloat(this.offsetX);e=r+a}else if(this.hAlign=="left"){let r=0,a=isNaN(parseFloat(this.offsetX))?0:parseFloat(this.offsetX);e=r+a}else if(this.hAlign=="right"){let r=i-t,a=isNaN(parseFloat(this.offsetX))?0:parseFloat(this.offsetX);e=r+a}return parseFloat(e)},getTop(){let e,t=this.height,i=this.canvasHeight;if(this.vAlign=="middle"){let r=(i-t)/2,a=isNaN(parseFloat(this.offsetY))?0:parseFloat(this.offsetY);e=r+a}else if(this.vAlign=="top"){let r=0,a=isNaN(parseFloat(this.offsetY))?0:parseFloat(this.offsetY);e=r+a}else if(this.vAlign=="bottom"){let r=i-t,a=isNaN(parseFloat(this.offsetY))?0:parseFloat(this.offsetY);e=r+a}return parseFloat(e)},getStyle(){if(!this.imageId||!this.$root.$options.editor.images[this.imageId])return;let e={};return e.left=this.getLeft+"px",e.top=this.getTop+"px",e.width=this.width,e.height=this.height+"px",e},vAlign(){return this.hasView("align_v")?this.layer.settings.views[this.activeView.id].align_v:"middle"},hAlign(){return this.hasView("align_h")?this.layer.settings.views[this.activeView.id].align_h:"center"},offsetX(){return this.hasView("offset_x")?this.layer.settings.views[this.activeView.id].offset_x:0},offsetY(){return this.hasView("offset_y")?this.layer.settings.views[this.activeView.id].offset_y:0},order(){return this.hasView("z_index")?this.layer.settings.views[this.activeView.id].z_index:""},width(){return this.hasView("width")?this.layer.settings.views[this.activeView.id].width:this.$root.$options.editor.images[this.imageId].width},height(){return this.hasView("height")?this.layer.settings.views[this.activeView.id].height:this.$root.$options.editor.images[this.imageId].height}},watch:{imageId(e){e||(this.hasView("offset_x")&&delete this.layer.settings.views[this.activeView.id].offset_x,this.hasView("offset_y")&&delete this.layer.settings.views[this.activeView.id].offset_y),this.hasView("offset_x")&&(this.layer.settings.views[this.activeView.id].width=this.originalWidth),this.hasView("offset_y")&&(this.layer.settings.views[this.activeView.id].height=this.originalHeight)}},beforeUnmount(){this.hasView("offset_x")&&delete this.layer.settings.views[this.activeView.id].offset_x,this.hasView("offset_y")&&delete this.layer.settings.views[this.activeView.id].offset_y,this.hasView("width")&&delete this.layer.settings.views[this.activeView.id].width,this.hasView("height")&&delete this.layer.settings.views[this.activeView.id].height},methods:{getOffsetX(e,t){let i=this.cavasWidth,r;if(this.hAlign=="center"){let a=(i-t)/2;r=e-a}else if(this.hAlign=="left")r=e-0;else if(this.hAlign=="right"){let a=i-t;r=e-a}return r},getOffsetY(e,t){let i=this.canvasHeight,r;if(this.vAlign=="middle"){let a=(i-t)/2;r=e-a}else if(this.vAlign=="top")r=e-0;else if(this.vAlign=="bottom"){let a=i-t;r=e-a}return r},setSettingsOnDragResize(e,t){let i=e.top,r=e.left,a,s,o;a=this.getOffsetX(r,e.width),s=this.getOffsetY(i,e.height),o={width:e.width,height:e.height,offset_x:parseFloat(a),offset_y:parseFloat(s)},this.$store.dispatch("updateOnDragResize",{values:o,action:t})},onXMove(e){let t=this.getOffsetX(e,this.width);this.$store.dispatch("updateAlignment",{prop:"offset_x",value:t})},onYMove(e){let t=this.getOffsetY(e,this.height);this.$store.dispatch("updateAlignment",{prop:"offset_y",value:t})},onDragStop(e){this.setSettingsOnDragResize(e,"moved")},onResizeStop(e){this.setSettingsOnDragResize(e,"resized")},hasView(e){return this.layer.settings&&this.layer.settings.views&&this.layer.settings.views[this.activeView.id]&&this.layer.settings.views[this.activeView.id][e]}}},xs=window.Vue.createElementVNode,Xl=window.Vue.resolveComponent,jl=window.Vue.normalizeClass,Ul=window.Vue.withCtx,Wl=window.Vue.openBlock,Gl=window.Vue.createBlock,Kl=window.Vue.createCommentVNode,Jl={class:"wpc-layer-image"},ql=["src"];function Zl(e,t,i,r,a,s){const o=Xl("draggable");return s.src&&i.layer.type==="image"?(Wl(),Gl(o,{key:0,isActive:s.isDraggable,class:jl(i.layer.uid===e.$store.state.activeLayer.uid?"wpc-layer-image-active":""),x:s.getLeft,y:s.getTop,w:s.width,h:s.height,z:s.order,parentW:s.cavasWidth,parentH:s.canvasHeight,aspectRatio:!0,originalWidth:s.originalWidth,originalHeight:s.originalHeight,resize:!0,onDragStop:s.onDragStop,onResizeStop:s.onResizeStop,onYMoved:s.onYMove,onXMoved:s.onXMove},{default:Ul(()=>[xs("div",Jl,[xs("img",{src:s.src,ref:"image"},null,8,ql)])]),_:1},8,["isActive","class","x","y","w","h","z","parentW","parentH","originalWidth","originalHeight","onDragStop","onResizeStop","onYMoved","onXMoved"])):Kl("",!0)}var Ql=h(Ml,[["render",Zl]]);const ec={props:{layer:Object,view:Object},computed:{isHotspotActive(){return this.$store.state.activeHotspot},activeView(){return this.$store.state.activeView},cavasWidth(){return this.$store.state.canvasRect.width},canvasHeight(){return this.$store.state.canvasRect.height},getLeft(){let e,t=this.width,i=this.cavasWidth;if(this.hAlign=="center"){let r=(i-t)/2,a=isNaN(parseFloat(this.offsetX))?0:parseFloat(this.offsetX);e=r+a}else if(this.hAlign=="left"){let r=0,a=isNaN(parseFloat(this.offsetX))?0:parseFloat(this.offsetX);e=r+a}else if(this.hAlign=="right"){let r=i-t,a=isNaN(parseFloat(this.offsetX))?0:parseFloat(this.offsetX);e=r+a}return parseFloat(e)},getTop(){let e,t=this.height,i=this.canvasHeight;if(this.vAlign=="middle"){let r=(i-t)/2,a=isNaN(parseFloat(this.offsetY))?0:parseFloat(this.offsetY);e=r+a}else if(this.vAlign=="top"){let r=0,a=isNaN(parseFloat(this.offsetY))?0:parseFloat(this.offsetY);e=r+a}else if(this.vAlign=="bottom"){let r=i-t,a=isNaN(parseFloat(this.offsetY))?0:parseFloat(this.offsetY);e=r+a}return parseFloat(e)},getStyle(){if(!this.imageId||!this.$root.$options.editor.images[this.imageId])return;let e={};return e.left=this.getLeft+"px",e.top=this.getTop+"px",e.width=this.width,e.height=this.height+"px",e},vAlign(){return this.hasView("align_v")?this.layer.settings.views[this.activeView.id].align_v:"middle"},hAlign(){return this.hasView("align_h")?this.layer.settings.views[this.activeView.id].align_h:"center"},offsetX(){return this.hasView("offset_x")?this.layer.settings.views[this.activeView.id].offset_x:0},offsetY(){return this.hasView("offset_y")?this.layer.settings.views[this.activeView.id].offset_y:0},width(){return 36},height(){return 36}},beforeUnmount(){this.hasView("offset_x")&&delete this.layer.settings.views[this.activeView.id].offset_x,this.hasView("offset_y")&&delete this.layer.settings.views[this.activeView.id].offset_y},methods:{getOffsetX(e,t){let i=this.cavasWidth,r;if(this.hAlign=="center"){let a=(i-t)/2;r=e-a}else if(this.hAlign=="left")r=e-0;else if(this.hAlign=="right"){let a=i-t;r=e-a}return r},getOffsetY(e,t){let i=this.canvasHeight,r;if(this.vAlign=="middle"){let a=(i-t)/2;r=e-a}else if(this.vAlign=="top")r=e-0;else if(this.vAlign=="bottom"){let a=i-t;r=e-a}return r},setSettingsOnDragResize(e,t){let i=e.top,r=e.left,a,s,o;a=this.getOffsetX(r,e.width),s=this.getOffsetY(i,e.height),o={offset_x:parseFloat(a),offset_y:parseFloat(s)},this.$store.dispatch("updateOnDragResize",{values:o,action:t})},onXMove(e){let t=this.getOffsetX(e,this.width);this.$store.dispatch("updateAlignment",{prop:"offset_x",value:t})},onYMove(e){let t=this.getOffsetY(e,this.height);this.$store.dispatch("updateAlignment",{prop:"offset_y",value:t})},onDragStop(e){this.setSettingsOnDragResize(e,"moved")},hasView(e){return this.layer.settings&&this.layer.settings.views&&this.layer.settings.views[this.activeView.id]&&this.layer.settings.views[this.activeView.id][e]},removeHotspot(){this.$store.dispatch("removeHotspot"),this.hasView("offset_x")&&delete this.$store.state.activeLayer.settings.views[this.$store.state.activeView.id].offset_x,this.hasView("offset_y")&&delete this.$store.state.activeLayer.settings.views[this.$store.state.activeView.id].offset_y,this.hasView("width")&&delete this.$store.state.activeLayer.settings.views[this.$store.state.activeView.id].offset_x,this.hasView("height")&&delete this.$store.state.activeLayer.settings.views[this.$store.state.activeView.id].offset_y}}},tc=window.Vue.createElementVNode,sc=window.Vue.resolveComponent,ic=window.Vue.normalizeClass,oc=window.Vue.withCtx,ac=window.Vue.openBlock,nc=window.Vue.createBlock,rc=tc("span",null,null,-1);function lc(e,t,i,r,a,s){const o=sc("draggable");return ac(),nc(o,{class:ic(["wpce-hotspot",s.isHotspotActive?"wpc-layer-image-active":""]),isActive:i.layer.uid===e.$store.state.activeLayer.uid&&s.isHotspotActive,x:s.getLeft,y:s.getTop,w:s.width,h:s.height,z:1e6,parentW:s.cavasWidth,parentH:s.canvasHeight,onDragStop:s.onDragStop,onYMoved:s.onYMove,onXMoved:s.onXMove,onDelete:s.removeHotspot},{default:oc(()=>[rc]),_:1},8,["isActive","class","x","y","w","h","parentW","parentH","onDragStop","onYMoved","onXMoved","onDelete"])}var cc=h(ec,[["render",lc]]);const dc={components:{layerImage:Ql,layerHotspot:cc},props:{layer:Object,view:Object},computed:{visibilityClass(){if(this.$store.state.showOnlyActiveLayers&&!(this.layer.settings&&this.layer.settings.active)||this.$store.state.hiddenLayers.includes(this.layer.uid)||this.$store.state.showOnlyLockLayers&&!(this.layer.settings&&this.layer.actions.lock))return!0},hasChildren(){return this.layer.children&&this.layer.children.length>0},hasHotspot(){return this.layer.settings&&this.layer.settings.views&&this.layer.settings.views[this.view.id]&&this.layer.settings.views[this.view.id].hs_enable}},methods:{setActiveLayer(e){this.$store.state.activeLayer=this.layer,this.setParentOpen(this.layer.uid),e?this.$store.state.activeHotspot=!0:this.$store.state.activeHotspot=!1},setParentOpen(e){let t=this.$store.state.simplifiedLayers[e].parent?this.$store.state.simplifiedLayers[e].parent.uid:"";if(!t)return;let i=this.$store.state.simplifiedLayers[t];i.item.actions.open=!0,i.parent&&this.setParentOpen(i.item.uid)}}},pc=window.Vue.resolveDynamicComponent,uc=window.Vue.normalizeClass,Ne=window.Vue.openBlock,Ft=window.Vue.createBlock,Pt=window.Vue.createCommentVNode,Bs=window.Vue.resolveComponent,hc=window.Vue.renderList,Os=window.Vue.Fragment,Ds=window.Vue.createElementBlock;function wc(e,t,i,r,a,s){const o=Bs("layer-hotspot"),n=Bs("layer-item",!0);return Ne(),Ds(Os,null,[i.layer.type!=="group"?(Ne(),Ft(pc("layer-"+i.layer.type),{key:0,class:uc({"wpc-hide-images":s.visibilityClass}),layer:i.layer,view:i.view,onClick:t[0]||(t[0]=l=>s.setActiveLayer(!1))},null,8,["class","layer","view"])):Pt("",!0),i.layer.type==="group"&&s.hasHotspot?(Ne(),Ft(o,{key:1,layer:i.layer,view:i.view,onClick:t[1]||(t[1]=l=>s.setActiveLayer(!0))},null,8,["layer","view"])):Pt("",!0),s.hasChildren?(Ne(!0),Ds(Os,{key:2},hc(i.layer.children,l=>(Ne(),Ft(n,{key:l.uid,layer:l,view:i.view},null,8,["layer","view"]))),128)):Pt("",!0)],64)}var _c=h(dc,[["render",wc]]);const vc={components:{layerItem:_c,SketchRule:Xi},data(){return{x:10,y:10,scale:1,startX:11,startY:11,lines:{h:[0,100],v:[0,100]},thick:20,isShowReferLine:!0,showGuides:!0}},computed:{layers(){return this.$store.state.layers},views(){return this.$store.state.views},activeView(){return this.$store.state.activeView},canvasWidth(){return this.$store.state.canvasRect.width},canvasHeight(){return this.$store.state.canvasRect.height},shadow(){return{x:10,y:10,width:this.canvasWidth,height:this.canvasHeight}}},mounted(){this.$store.state.canvasRect=this.$el.getBoundingClientRect(),window.addEventListener("resize",()=>{this.$store.state.canvasRect=this.$el.getBoundingClientRect()})},methods:{handleLine(e){this.lines=e},handleCornerClick(){this.showGuides=!this.showGuides}}},Is=window.Vue.resolveComponent,yc=window.Vue.createVNode,zs=window.Vue.renderList,Fs=window.Vue.Fragment,xe=window.Vue.openBlock,at=window.Vue.createElementBlock,gc=window.Vue.createBlock,mc=window.Vue.vShow,Ps=window.Vue.normalizeClass,fc=window.Vue.withDirectives;function $c(e,t,i,r,a,s){const o=Is("SketchRule"),n=Is("layer-item");return xe(),at("div",{id:"wpc-preview-canvas",ref:"canvas",class:Ps({"wpc-hide-spots":!e.$store.state.showHotspots,"wpc-hide-guides":!a.showGuides})},[yc(o,{thick:a.thick,scale:a.scale,width:e.$store.state.canvasRect.width,height:e.$store.state.canvasRect.height,"start-x":a.startX,"start-y":a.startY,shadow:s.shadow,"hor-line-arr":a.lines.h,"ver-line-arr":a.lines.v,cornerActive:!1,onHandleLine:s.handleLine,onOnCornerClick:s.handleCornerClick},null,8,["thick","scale","width","height","start-x","start-y","shadow","hor-line-arr","ver-line-arr","onHandleLine","onOnCornerClick"]),(xe(!0),at(Fs,null,zs(s.views,l=>fc((xe(),at("div",{class:Ps(["wpc-canvas-view",l.id]),key:l.id},[(xe(!0),at(Fs,null,zs(s.layers,p=>(xe(),gc(n,{key:p.uid,layer:p,view:l},null,8,["layer","view"]))),128))],2)),[[mc,l.id==s.activeView.id]])),128))],2)}var Vc=h(vc,[["render",$c]]);const Lc={props:{activeTab:String},computed:{}},pe=window.Vue.createElementVNode,Yt=window.Vue.normalizeClass,kc=window.Vue.openBlock,bc=window.Vue.createElementBlock,Cc={class:"wpc-option-container"},Tc={class:"wpc-option-group"},Ec=pe("span",{class:"material-icons"},"layers",-1),Sc=[Ec],Ac=pe("span",{class:"material-icons"},"settings",-1),Nc=[Ac],xc=pe("span",{class:"material-icons"},"select_all",-1),Bc=[xc];function Oc(e,t,i,r,a,s){return kc(),bc("div",Cc,[pe("div",Tc,[pe("div",{class:Yt(["wpc-option-set",i.activeTab==="layer_controls"?"wpc-active":""]),onClick:t[0]||(t[0]=o=>e.$emit("setActiveTab","layer_controls"))},Sc,2),pe("div",{class:Yt(["wpc-option-set",i.activeTab==="global_controls"?"wpc-active":""]),onClick:t[1]||(t[1]=o=>e.$emit("setActiveTab","global_controls"))},Nc,2),pe("div",{class:Yt(["wpc-option-set",i.activeTab==="css_js_controls"?"wpc-active":""]),onClick:t[2]||(t[2]=o=>e.$emit("setActiveTab","css_js_controls"))},Bc,2)])])}var Dc=h(Lc,[["render",Oc]]);const Ic={props:{section:Object,id:String,open:Boolean},data(){return{isOpen:this.open}},computed:{settings(){let e=this.$store.state.activeLayer,t=e.settings||{};return Object.assign({},t,{layerType:e.type,style:this.$store.state.settings.global_controls._wpc_config_style})},hideToggle(){if(this.id=="layer_type"&&this.$store.state.activeLayer.type==="group")return!0}},methods:{toggle(){this.isOpen=!this.isOpen},show(e){if(!e.conditions||e.conditions.length==0)return!0;let t;return typeof e.conditions[0]!="object"?t=[e.conditions]:t=e.conditions,ws.check(t,this.settings)}}},zc=window.Vue.toDisplayString,nt=window.Vue.createElementVNode,Fc=window.Vue.createTextVNode,Pc=window.Vue.withModifiers,Yc=window.Vue.normalizeClass,Hc=window.Vue.renderList,Ys=window.Vue.Fragment,rt=window.Vue.openBlock,Ht=window.Vue.createElementBlock,Rc=window.Vue.resolveDynamicComponent,Mc=window.Vue.createBlock,Hs=window.Vue.createCommentVNode,Xc=window.Vue.vShow,jc=window.Vue.withDirectives,Uc={key:0,class:"wpc-options"},Wc={class:"wpc-option-title"},Gc=nt("span",{class:"material-icons"},"keyboard_arrow_down",-1),Kc={class:"wpc-option-inner"};function Jc(e,t,i,r,a,s){return s.hideToggle?Hs("",!0):(rt(),Ht("div",Uc,[nt("div",{class:Yc(["wpc-title-set",!a.isOpen||"wpc-panel-active"]),onClick:t[0]||(t[0]=Pc((...o)=>s.toggle&&s.toggle(...o),["stop"]))},[nt("h3",Wc,[Fc(zc(i.section.name),1),Gc])],2),jc(nt("div",Kc,[(rt(!0),Ht(Ys,null,Hc(i.section.settings,(o,n)=>(rt(),Ht(Ys,{key:n},[s.show(o)?(rt(),Mc(Rc(o.type+"-control"),{key:0,control:o,type:n},null,8,["control","type"])):Hs("",!0)],64))),128))],512),[[Xc,a.isOpen]])]))}var qc=h(Ic,[["render",Jc]]);const Zc={props:{settings:Object},components:{controlSection:qc}},Qc=window.Vue.renderList,ed=window.Vue.Fragment,Rt=window.Vue.openBlock,Rs=window.Vue.createElementBlock,td=window.Vue.resolveComponent,sd=window.Vue.createBlock,id={class:"wpc-options-set"};function od(e,t,i,r,a,s){const o=td("control-section");return Rt(),Rs("div",id,[(Rt(!0),Rs(ed,null,Qc(i.settings,(n,l,p)=>(Rt(),sd(o,{key:l,id:l,section:n,open:e.$store.state.activeTab==="layer_controls"?p===1:p===0},null,8,["id","section","open"]))),128))])}var ad=h(Zc,[["render",od]]);const nd={components:{tabs:Dc,tabPanel:ad},data(){return{}},computed:{activeTab:{get(){return this.$store.state.activeTab},set(e){this.$store.state.activeTab=e}},tabPanels(){return this.$root.$options.editor.tabs}},methods:{setActiveTab(e){this.activeTab=e}}},Ms=window.Vue.resolveComponent,Xs=window.Vue.createVNode,rd=window.Vue.toDisplayString,lt=window.Vue.createElementVNode,js=window.Vue.openBlock,Us=window.Vue.createElementBlock,ld=window.Vue.createCommentVNode,cd={id:"wpc-right-sidebar"},dd={class:"wpc-layer-options"},pd={class:"wpc-options-set-con"},ud={class:"wpc-options-set-wrap"},hd={key:0,class:"wpc-layer-title-set"},wd={class:"wpc-layer-title"};function _d(e,t,i,r,a,s){const o=Ms("tabs"),n=Ms("tab-panel");return js(),Us("div",cd,[lt("div",dd,[Xs(o,{activeTab:s.activeTab,onSetActiveTab:s.setActiveTab},null,8,["activeTab","onSetActiveTab"]),lt("div",pd,[lt("div",ud,[s.activeTab==="layer_controls"?(js(),Us("div",hd,[lt("h2",wd,rd(e.$store.state.activeLayer.name),1)])):ld("",!0),Xs(n,{settings:s.tabPanels[s.activeTab]},null,8,["settings"])])])])])}var vd=h(nd,[["render",_d]]);const yd={name:"config-tour",data(){return{tourStarted:!1,tourCallbacks:{onSkip:this.completeTour,onFinish:this.completeTour,onStop:this.completeTour},steps:[{target:".top-toolbar-layer-wrap",content:"Mouse over the element then <br> Click any of the Group/sub group or <br> a Image layer to create a appropriate layer.",params:{placement:"right"}},{target:".wpc-text-wrap",content:"Mouse over the layer then plus icon and <br> click any of the related icon to add a <br>Group/sub group or a Image layer.",params:{placement:"bottom-end"}},{target:".top-toolbar-view-wrap",content:"Mouse over here to add/edit/delete a views.",params:{placement:"right"}},{target:".wpc-option-set:nth-child(1)",content:"Click here to change the layer settings depends on the layer type. Eg: Price, Active on load, Multiple, and etc.",params:{placement:"bottom-end"}},{target:".wpc-option-set:nth-child(2)",content:"Click here to change the configurator global settings. Eg: Style, Base price, Form, and etc..",params:{placement:"bottom-end"}},{target:".wpc-layer-image",content:"Click the image layer and <br>add images in the layer setting,<br> it will appears in the canvas area.",params:{placement:"bottom-start"}},{target:".top-toolbar-hotspot-wrap",content:"Mouse over here to add/remove a hotspot, if the layer type is group/sub group.",params:{placement:"bottom-start"}},{target:".top-toolbar-right-side .top-toolbar-text-wrap",content:"If you made any mistakes, History will helps to undo/redo the actions. Awesome! Is n't it?",params:{placement:"left-start"}},{target:".top-toolbar-right-side .top-toolbar-text-wrap:last-child",content:"Once you made all the changes, Click here to Save.",params:{placement:"left-start"}}]}},computed:{tourIntro(){return!(this.tourStarted||wpc.editor.tour_completed)}},methods:{startTour(){this.tourStarted=!0,this.$tours.configTour.start()},completeTour(){jQuery.ajax({type:"post",url:ajaxurl,cache:!1,data:{action:"wpc_complete_tour"}}).done(function(e){wpc.editor.tour_completed=!0}).always(function(){})}}},Be=window.Vue.createElementVNode;window.Vue.createTextVNode;const gd=window.Vue.withModifiers,Ws=window.Vue.openBlock,Gs=window.Vue.createElementBlock,md=window.Vue.createCommentVNode,fd=window.Vue.resolveComponent,$d=window.Vue.createVNode,Vd=window.Vue.createStaticVNode,Ld=window.Vue.Fragment,kd={key:0,class:"wpc-tutorial-tour-wrap"},bd=Be("div",{class:"wpc-overlay"},null,-1),Cd={class:"wpc-tutorial-tour"},Td=Vd('<p class="wpc-tour-subtitle">Tour</p><h4 class="wpc-tour-title">Configurator</h4><p class="wpc-tour-desc">To help you to get started using the configurator editor. We will show you how to do things like setup a layer and image and modify the layer settings, and change the style. Ready?</p><span class="wpc-tour-info"><span class="material-icons">schedule</span>It&#39;s about a 2min thing.</span>',4),Ed={class:"wpc-start-tour"};function Sd(e,t,i,r,a,s){const o=fd("v-tour");return Ws(),Gs(Ld,null,[s.tourIntro?(Ws(),Gs("div",kd,[bd,Be("div",Cd,[Be("span",{class:"wpc-tour-close material-icons",onClick:t[0]||(t[0]=(...n)=>this.completeTour&&this.completeTour(...n))},"close"),Td,Be("div",Ed,[Be("a",{href:"",onClick:t[1]||(t[1]=gd((...n)=>s.startTour&&s.startTour(...n),["prevent"]))},"Let's Go")])])])):md("",!0),$d(o,{name:"configTour",steps:a.steps,callbacks:a.tourCallbacks},null,8,["steps","callbacks"])],64)}var Ad=h(yd,[["render",Sd]]);var Oe=JSON.parse(JSON.stringify(wpc.editor));Oe.images=Array.isArray(Oe.images)?{}:Oe.images;const Nd={components:{Toolbar:kl,LeftSidebar:Rl,RightSidebar:vd,TutorialTour:Ad,CanvasRuler:Vc},editor:Oe,layerTypes:Oe.defaults.layers_types,data(){return{done:[],undone:[],ignoreMutations:["toggleLayer","updateSettingsTab","toggleVisibility","setAllLayerVisible","toggleShowOnlyActiveLayers","toggleLock","setAllLayerUnlocked","toggleShowOnlyLockLayers","addView","deleteView"]}},created(){this.$store.subscribeAction((e,t)=>{if(this.ignoreMutations.includes(e.type)||wpcEditorUtils.apply_filters("wpc_editor_ignore_history_mutations",!1,e.type))return;e.payload&&!e.payload.history&&(this.undone=[]);let i={name:e.type,action:e},r="",a={},s={},o="";switch(e.type){case"updateSettings":i={uid:t.activeLayer.uid,name:_(`${e.payload.name} updated for ${t.activeLayer.name}`),oldSettings:JSON.stringify(t.activeLayer.settings),newValue:e.payload.value,action:e};break;case"updateAlignment":e.payload.prop==="offset_x"||e.payload.prop==="offset_y"?t.activeLayer.type==="group"?o=_("Hotspot offset resetted"):o=_(`${t.activeLayer.type} offset resetted!`):t.activeLayer.type==="group"?o=_("Hotspot aligned"):o=_(`${t.activeLayer.type} alignment changed!`),r=t.activeLayer.settings.views[t.activeView.id],$(r.align_h)||(a.align_h=r.align_h),$(r.align_v)||(a.align_v=r.align_v),$(r.offset_x)||(a.offset_x=r.offset_x),$(r.offset_y)||(a.offset_y=r.offset_y),i={uid:t.activeLayer.uid,name:o,oldValue:a,newValue:e.payload,action:e},(e.payload.prop==="offset_x"&&e.payload.value=="0"&&($(a.offset_x)||a.offset_x=="0")||e.payload.prop==="offset_y"&&e.payload.value=="0"&&($(a.offset_y)||a.offset_y=="0"))&&(i=!1);break;case"updateOnDragResize":t.activeLayer.type==="group"?o=_("Hotspot moved"):o=_(`${t.activeLayer.type} moved`),s={offset_x:t.activeLayer.settings.views[t.activeView.id].offset_x,offset_y:t.activeLayer.settings.views[t.activeView.id].offset_y},i={uid:t.activeLayer.uid,name:o,oldOffset:s,newOffset:e.payload.values,action:e};break;case"setLayerType":i={uid:t.activeLayer.uid,name:_(`Layer Type updated for ${t.activeLayer.name}`),oldType:t.activeLayer.type,newType:e.payload.type,action:e};break;case"addHotspot":i={uid:t.activeLayer.uid,name:_("Hotspot added"),hotSpot:!0,action:e};break;case"removeHotspot":s={offset_x:t.activeLayer.settings.views[t.activeView.id].offset_x,offset_y:t.activeLayer.settings.views[t.activeView.id].offset_y},i={uid:t.activeLayer.uid,name:_("Hotspot removed"),hotSpot:!1,oldOffset:s,action:e};break;case"updateLayerName":let n=e.payload.layer.uid,l=this.$store.state.simplifiedLayers[n].item.name;i={uid:n,layer:e.payload.layer,name:_(`Layer Name updated for ${l}`),oldName:l,newName:e.payload.name,action:e};break;case"addLayer":case"duplicateLayer":case"deleteLayer":case"updateLayers":case"updateChildLayers":let p="";e.type=="addLayer"?p=wpc.editor.defaults.layers_types[e.payload.layerType].name+" Layer Added!":e.type=="duplicateLayer"?p=wpc.editor.defaults.layers_types[e.payload.layer.type].name+" Layer Duplicated!":e.type=="deleteLayer"?p=wpc.editor.defaults.layers_types[e.payload.layer.type].name+" Layer Deleted!":(e.type=="updateLayers"||e.type=="updateChildLayers")&&(p="Layer Moved!"),i={uid:t.activeLayer.uid,name:_(p),oldLayers:JSON.stringify(t.layers),action:e};break}i&&this.done.unshift(i)})},computed:{canUndo(){return this.done.length>0},canRedo(){return this.undone.length>0}},mounted(){document.addEventListener("keyup",this.undoRedo),document.title=`${_("Edit Configurator")} ${document.title}`},unmount(){document.removeEventListener("keyup",this.undoRedo)},methods:{undoRedo(e){e.stopPropagation(),!(!e.ctrlKey&&!e.shiftKey)&&(e.key==="z"&&e.ctrlKey?this.undo():(e.key==="y"&&e.ctrlKey||e.ctrlKey&&e.shiftKey&&e.key.toLowerCase()==="z")&&this.redo())},undo(){if(!this.canUndo)return;let e=this.done[0];switch(e.action.type){case"updateSettings":e.newSettings=JSON.stringify(this.$store.state.simplifiedLayers[e.uid].item.settings),e.oldSettings?this.$store.state.simplifiedLayers[e.uid].item.settings=JSON.parse(e.oldSettings):delete this.$store.state.simplifiedLayers[e.uid].item.settings;break;case"updateAlignment":if(!$(e.oldValue[e.newValue.prop]))this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id][e.newValue.prop]=e.oldValue[e.newValue.prop];else{let t=e.newValue.prop==="align_h"?"center":"middle";this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id][e.newValue.prop]=t}break;case"updateOnDragResize":this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].offset_x=e.oldOffset.offset_x,this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].offset_y=e.oldOffset.offset_y;break;case"addHotspot":this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].hs_enable=!1;break;case"removeHotspot":this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].hs_enable=!0,this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].offset_x=e.oldOffset.offset_x,this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].offset_y=e.oldOffset.offset_y;break;case"setLayerType":this.$store.state.simplifiedLayers[e.uid].item.type=e.oldType;break;case"updateLayerName":this.$store.state.simplifiedLayers[e.uid].item.name=e.oldName;break;case"addLayer":case"duplicateLayer":case"deleteLayer":case"updateLayers":case"updateChildLayers":e.newLayers=JSON.stringify(this.$store.state.layers),this.$store.state.layers=JSON.parse(e.oldLayers);break}this.done.shift(),this.undone.unshift(e)},redo(){if(!this.canRedo)return;let e=this.undone[0];switch(e.action.type){case"updateSettings":this.$store.state.simplifiedLayers[e.uid].item.settings=JSON.parse(e.newSettings);break;case"updateAlignment":this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id][e.newValue.prop]=e.newValue.value;break;case"updateOnDragResize":this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].offset_x=e.newOffset.offset_x,this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].offset_y=e.newOffset.offset_y;break;case"addHotspot":this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].hs_enable=!0;break;case"removeHotspot":this.$store.state.simplifiedLayers[e.uid].item.settings.views[this.$store.state.activeView.id].hs_enable=!1;break;case"setLayerType":this.$store.state.simplifiedLayers[e.uid].item.type=e.newType;break;case"updateLayerName":this.$store.state.simplifiedLayers[e.uid].item.name=e.newName;break;case"addLayer":case"duplicateLayer":case"deleteLayer":case"updateLayers":case"updateChildLayers":this.$store.state.layers=JSON.parse(e.newLayers);break}this.undone.shift(),this.done.unshift(e)}}},De=window.Vue.resolveComponent,Ie=window.Vue.createVNode,xd=window.Vue.createElementVNode,Bd=window.Vue.Fragment,Od=window.Vue.openBlock,Dd=window.Vue.createElementBlock,Id={class:"wpc-main-content"};function zd(e,t,i,r,a,s){const o=De("toolbar"),n=De("left-sidebar"),l=De("canvas-ruler"),p=De("right-sidebar"),N=De("tutorial-tour");return Od(),Dd(Bd,null,[Ie(o),xd("div",Id,[Ie(n),Ie(l),Ie(p)]),Ie(N)],64)}var Fd=h(Nd,[["render",zd]]);const Pd=window.Vuex.createStore;var Yd=wpc.editor.title,Hd=wpc.editor.save_btn_text,Ks=JSON.parse(JSON.stringify(wpc.editor.views)),Mt=JSON.parse(JSON.stringify(wpc.editor.components));Mt.length||(Mt=[{name:"Group Layer 1",uid:le(),type:"group",actions:{open:!0,show:!0,lock:!1},children:[{name:"Image 1",uid:le(),type:"image",actions:{open:!1,show:!0,lock:!1}}]}]);wpc.editor.images=Array.isArray(wpc.editor.images)?{}:wpc.editor.images;function Js(e,t){e.activeLayer.settings=e.activeLayer.settings||{},e.activeLayer.settings.views=e.activeLayer.settings.views||{},e.activeLayer.settings.views[e.activeView.id]=e.activeLayer.settings.views[e.activeView.id]||{};for(const i in t)e.activeLayer.settings.views[e.activeView.id][i]=t[i]}const qs=Pd({state:{title:Yd,saveBtnText:Hd,settings:{global_controls:wpc.editor.global_controls_default,css_js_controls:{_wpc_custom_css:"",_wpc_custom_js:""}},canvasRect:{},activeTab:"layer_controls",activeHotspot:!1,showHotspots:!0,hiddenLayers:[],lockedLayers:[],showOnlyLockLayers:!1,showOnlyActiveLayers:!1,activeLayer:"",activeLayerCollection:"",activeLayerParent:"",views:Ks,activeView:Ks[0],simplifiedLayers:{},layers:Mt},getters:{getActiveLayer(e){return e.activeLayer}},mutations:{UPDATE_TITLE(e,{title:t}){e.title=t},ADD_LAYER:(e,{layer:t,parent:i,layerType:r,push:a})=>{i=i||e.layers;let s={name:wpc.editor.defaults.layers_types[r].name,uid:le(),type:r,actions:{open:!1,show:!0}},o=wpc.editor.defaults.layers_types[r].show_only,n=le();if(o&&(t.settings=t.settings||{},t.settings.linked_in=t.settings.linked_in||[],t.settings.linked_in.push(n),s=JSON.parse(JSON.stringify(t)),s.name=wpc.editor.defaults.layers_types[r].name,s.uid=n,s.type=r,s.actions={open:!1,show:!0},s.settings=s.settings||{},s.settings.linked_to=t.uid,delete s.settings.linked_in),r==="group"){if(a)e.layers.push(s);else{let p=e.layers.indexOf(t)+1;e.layers.splice(p,0,s)}return}if(t.type==="group"){t.children=t.children||[],s.name=s.name+" "+(t.children.length+1),t.children.push(s);return}let l=i.indexOf(t)+1;i.splice(l,0,s)},DUPLICATE_LAYER:(e,{layer:t,parent:i})=>{let r=i.indexOf(t)+1,a=JSON.parse(JSON.stringify(t));At(a),i.splice(r,0,a)},DELETE_LAYER:(e,{layer:t,parent:i})=>{if(e.hiddenLayers.includes(t.uid)){let a=e.hiddenLayers.indexOf(t.uid);e.hiddenLayers.splice(a,1)}if(e.lockedLayers.includes(t.uid)){let a=e.lockedLayers.indexOf(t.uid);e.lockedLayers.splice(a,1)}if(t.settings&&t.settings.linked_to){let a=t.settings.linked_to,s=e.simplifiedLayers[a].item,o=t.uid,n=s.settings.linked_in.indexOf(o);s.settings.linked_in.splice(n,1)}t.settings&&t.settings.linked_in&&t.settings.linked_in.forEach(s=>{let o=e.simplifiedLayers[s].item,n=i.indexOf(o);i.splice(n,1)});let r=i.indexOf(t);i.splice(r,1)},UPDATE_LAYERS:(e,t)=>e.layers=t,UPDATE_CHILD_LAYERS:(e,{parent:t,value:i})=>t.children=i,UPDATE_LAYER_TYPE(e,{parent:t,layer:i}){!t&&i.type!="group"&&(i.type="group")},SET_LAYER_TYPE(e,{type:t}){e.activeLayer.type=t},UPDATE_LAYER_NAME(e,{layer:t,name:i}){t.name=i},TOGGLE_SHOW_ONLY_LOCK_LAYERS(e){e.showOnlyLockLayers=!e.showOnlyLockLayers},TOGGLE_LAYER_LOCK(e,{layerUid:t}){if(e.simplifiedLayers[t].item.actions.lock=!e.simplifiedLayers[t].item.actions.lock,!e.lockedLayers.includes(t))e.lockedLayers.push(t);else{let i=e.lockedLayers.indexOf(t);i!==-1&&e.lockedLayers.splice(i,1)}},SET_ALL_LAYER_UNLOCKED(e){e.lockedLayers.forEach(t=>{e.simplifiedLayers[t].item.actions.show=!0}),e.lockedLayers=[]},TOGGLE_SHOW_ONLY_ACTIVE_LAYERS(e){e.showOnlyActiveLayers=!e.showOnlyActiveLayers},TOGGLE_LAYER_VISIBILITY(e,{layerUid:t}){if(typeof e.simplifiedLayers[t].item.actions.show=="undefined"&&(e.simplifiedLayers[t].item.actions.show=!0),e.simplifiedLayers[t].item.actions.show=!e.simplifiedLayers[t].item.actions.show,!e.hiddenLayers.includes(t))e.hiddenLayers.push(t);else{let i=e.hiddenLayers.indexOf(t);i!==-1&&e.hiddenLayers.splice(i,1)}},SET_ALL_LAYER_VISIBLE(e){e.hiddenLayers.forEach(t=>{e.simplifiedLayers[t].item.actions.show=!0}),e.hiddenLayers=[]},TOGGLE_LAYER(e,{layer:t,action:i}){t.actions.open=i},ADD_VIEW(e,t){let r={id:t.replace(/\s+/g,"-").toLowerCase()+"-"+le(),name:t};e.views.push(r)},UPDATE_VIEW(e,t){e.views=t},EDIT_VIEW(e,{element:t,value:i}){t.name=i,console.log(e.layers)},DELETE_VIEW(e,{element:t,views:i}){var r=i.indexOf(t);e.activeView.id==t.id&&(r<=0?e.activeView=i[1]:e.activeView=i[r-1]),Object.keys(e.simplifiedLayers).forEach(a=>{!$(e.simplifiedLayers[a].item)&&!$(e.simplifiedLayers[a].item.settings)&&e.simplifiedLayers[a].item.settings&&!$(e.simplifiedLayers[a].item.settings.views)&&delete e.simplifiedLayers[a].item.settings.views[t.id]}),i.splice(r,1)},UPDATE_SETTINGS(e,{type:t,value:i,view:r}){if(e.activeLayer.settings=e.activeLayer.settings&&!Array.isArray(e.activeLayer.settings)?e.activeLayer.settings:{},r){if(e.activeLayer.settings.views&&e.activeLayer.settings.views[r]&&t==="image"&&(!e.activeLayer.settings.views[r].offset_x||delete e.activeLayer.settings.views[r].offset_x,!e.activeLayer.settings.views[r].offset_y||delete e.activeLayer.settings.views[r].offset_y,!e.activeLayer.settings.views[r].width||delete e.activeLayer.settings.views[r].width,!e.activeLayer.settings.views[r].height||delete e.activeLayer.settings.views[r].height),!i||i==""){if(!e.activeLayer.settings.views[r]||!e.activeLayer.settings.views[r][t])return;delete e.activeLayer.settings.views[r][t],Object.keys(e.activeLayer.settings.views[r]).length||delete e.activeLayer.settings.views[r],Object.keys(e.activeLayer.settings.views).length||delete e.activeLayer.settings.views;return}e.activeLayer.settings.views=e.activeLayer.settings.views||{},e.activeLayer.settings.views[r]=e.activeLayer.settings.views[r]||{},e.activeLayer.settings.views[r][t]=i}else{if(!i||i==""){delete e.activeLayer.settings[t];return}e.activeLayer.settings[t]=i}},UPDATE_SETTINGS_TAB(e,{type:t,value:i,view:r}){if(e.settings[e.activeTab]=e.settings[e.activeTab]||{},r){if(!i||i==""){if(!e.settings[e.activeTab][t][r])return;e.settings[e.activeTab][t][r]=void 0}e.settings[e.activeTab][t]=e.settings[e.activeTab][t]&&typeof e.settings[e.activeTab][t]!="string"?e.settings[e.activeTab][t]:{},e.settings[e.activeTab][t][r]=i}else{if(!i||i==""){e.settings[e.activeTab][t]&&delete e.settings[e.activeTab][t];return}e.settings[e.activeTab][t]=i}},ADD_HOTSPOT(e){e.activeLayer.settings=e.activeLayer.settings||{},e.activeLayer.settings.views=e.activeLayer.settings.views||{},e.activeLayer.settings.views[e.activeView.id]=e.activeLayer.settings.views[e.activeView.id]||{},e.activeLayer.settings.views[e.activeView.id].hs_enable=!0,e.showHotspots=!0},REMOVE_HOTSPOT(e){delete e.activeLayer.settings.views[e.activeView.id].hs_enable},UPDATE_ALIGNMENT(e,{prop:t,value:i}){if(!i||t==="align_v"&&i=="middle"||t==="align_h"&&i=="center"||(t=="offset_x"||t=="offset_y")&&i==0){e.activeLayer.settings&&e.activeLayer.settings.views&&e.activeLayer.settings.views[e.activeView.id]&&e.activeLayer.settings.views[e.activeView.id][t]&&(delete e.activeLayer.settings.views[e.activeView.id][t],Object.keys(e.activeLayer.settings.views[e.activeView.id]).length||delete e.activeLayer.settings.views[e.activeView.id],Object.keys(e.activeLayer.settings.views).length||delete e.activeLayer.settings.views);return}e.activeLayer.settings=e.activeLayer.settings||{},e.activeLayer.settings.views=e.activeLayer.settings.views||{},e.activeLayer.settings.views[e.activeView.id]=e.activeLayer.settings.views[e.activeView.id]||{},e.activeLayer.settings.views[e.activeView.id][t]=i},UPDATE_MOVED(e,t){Js(e,t)},UPDATE_RESIZED(e,t){Js(e,t)}},actions:{updateTitle({commit:e},t){e("UPDATE_TITLE",t)},addLayer({commit:e},t){e("ADD_LAYER",t)},duplicateLayer({commit:e},t){e("DUPLICATE_LAYER",t)},deleteLayer({commit:e},t){e("DELETE_LAYER",t)},updateLayers({commit:e},t){e("UPDATE_LAYERS",t)},updateChildLayers({commit:e},t){e("UPDATE_CHILD_LAYERS",t)},updateLayerType({commit:e},t){e("UPDATE_LAYER_TYPE",t)},updateLayerName({commit:e},t){e("UPDATE_LAYER_NAME",t)},toggleShowOnlyLockLayers({commit:e},t){e("TOGGLE_SHOW_ONLY_LOCK_LAYERS",t)},toggleLock({commit:e},t){e("TOGGLE_LAYER_LOCK",t)},setAllLayerUnlocked({commit:e},t){e("SET_ALL_LAYER_UNLOCKED",t)},toggleShowOnlyActiveLayers({commit:e},t){e("TOGGLE_SHOW_ONLY_ACTIVE_LAYERS",t)},toggleVisibility({commit:e},t){e("TOGGLE_LAYER_VISIBILITY",t)},setAllLayerVisible({commit:e},t){e("SET_ALL_LAYER_VISIBLE",t)},toggleLayer({commit:e},t){e("TOGGLE_LAYER",t)},addView({commit:e},t){e("ADD_VIEW",t)},updateView({commit:e},t){e("UPDATE_VIEW",t)},editView({commit:e},t){e("EDIT_VIEW",t)},deleteView({commit:e},t){e("DELETE_VIEW",t)},updateSettings({commit:e},t){e("UPDATE_SETTINGS",t)},updateSettingsTab({commit:e},t){e("UPDATE_SETTINGS_TAB",t)},addHotspot({commit:e},t){e("ADD_HOTSPOT",t)},removeHotspot({commit:e},t){e("REMOVE_HOTSPOT",t)},setLayerType({commit:e},t){e("SET_LAYER_TYPE",t)},updateAlignment({commit:e},t){e("UPDATE_ALIGNMENT",t)},updateOnDragResize({commit:e},{values:t,action:i}){e(i==="moved"?"UPDATE_MOVED":"UPDATE_RESIZED",t)}}});const Rd={components:{draggable:St},props:{layers:[Array,Boolean],child:!1,parent:!1},emits:["input"],data(){return{drag:!1}},created(){},computed:{dragOptions(){return{animation:200,group:"layers",disabled:!1,ghostClass:"ghost"}},layerComp:{get(){return this.layers?this.layers:this.$store.state.layers},set(e){this.parent?this.$store.dispatch("updateChildLayers",{parent:this.parent,value:e}):this.$store.dispatch("updateLayers",e)}}},methods:{layersListChanged(e){if(!e.added)return;let t=e.added.element;this.$store.dispatch("updateLayerType",{parent:this.parent,layer:t})},isLayerTypeExist(e){return Object.keys(this.$root.$options.layerTypes).includes(e)}}},Zs=window.Vue.resolveComponent,Md=window.Vue.normalizeClass,Qs=window.Vue.openBlock,ei=window.Vue.createBlock,Xd=window.Vue.createCommentVNode,jd=window.Vue.mergeProps,Ud=window.Vue.withCtx;function Wd(e,t,i,r,a,s){const o=Zs("layer"),n=Zs("draggable");return Qs(),ei(n,jd({modelValue:s.layerComp,"onUpdate:modelValue":t[0]||(t[0]=l=>s.layerComp=l),"item-key":"uid",tag:"ul"},s.dragOptions,{class:"wpc-group-list-wrap",onStart:t[1]||(t[1]=l=>a.drag=!0),onEnd:t[2]||(t[2]=l=>a.drag=!1),onChange:s.layersListChanged}),{item:Ud(({element:l})=>[s.isLayerTypeExist(l.type)&&l.type!=="sub_group"?(Qs(),ei(o,{key:0,layer:l,parent:s.layerComp,parentLayer:i.parent,class:Md("wpc-layer-"+l.type)},null,8,["layer","parent","parentLayer","class"])):Xd("",!0)]),_:1},16,["modelValue","onChange"])}var Gd=h(Rd,[["render",Wd]]);const Kd={props:{type:String,show:Boolean,lock:Boolean},computed:{visibilityIcon(){return this.show?"visibility":"visibility_off"},lockIcon(){return this.lock?"lock":"lock_open"},allowDelete(){let e=this.$store.state.layers.length,t=this.type;return 1<e||t!=="group"}},methods:{isAllowedToAdd(e){return!(e.show_only&&e.show_only!=this.type)}}},G=window.Vue.withModifiers,ze=window.Vue.createElementVNode,Jd=window.Vue.normalizeClass,K=window.Vue.openBlock,J=window.Vue.createElementBlock,Fe=window.Vue.createCommentVNode,ct=window.Vue.toDisplayString,qd=window.Vue.renderList,ti=window.Vue.Fragment,Zd={class:"wpc-layer-control"},Qd={class:"wpc-add-layer-control-group"},ep={class:"wpc-add-layer-controls"},tp=["onClick"];function sp(e,t,i,r,a,s){return K(),J("div",Zd,[ze("span",{class:"wpc-layer-edit-icon material-icons",onClick:t[0]||(t[0]=G(o=>e.$emit("edit:layername"),["stop"]))},"edit"),ze("span",{class:"wpc-layer-lock-icon material-icons",onClick:t[1]||(t[1]=G(o=>e.$emit("duplicate"),["stop"]))},"content_copy"),s.allowDelete?(K(),J("span",{key:0,class:Jd(["wpc-layer-lock-icon material-icons",s.allowDelete]),onClick:t[2]||(t[2]=G(o=>e.$emit("delete"),["stop"]))},"delete_outline",2)):Fe("",!0),i.type!=="group"?(K(),J("span",{key:1,class:"material-icons",onClick:t[3]||(t[3]=G(o=>e.$emit("toggle-visibility"),["stop"]))},ct(s.visibilityIcon),1)):Fe("",!0),i.type!=="group"?(K(),J("span",{key:2,class:"wpc-layer-lock-icon material-icons",onClick:t[4]||(t[4]=G(o=>e.$emit("toggle-lock"),["stop"]))},ct(s.lockIcon),1)):Fe("",!0),ze("div",Qd,[ze("span",{class:"wpc-layer-add-icon material-icons",onClick:t[5]||(t[5]=G(o=>e.$emit("add-layer","image"),["stop"]))},"add_box"),ze("div",ep,[i.type==="group"?(K(),J("span",{key:0,class:"wpc-layer-add-control material-icons",onClick:t[6]||(t[6]=G(o=>e.$emit("add-layer","group"),["stop"]))},ct(e.$root.$options.layerTypes[i.type].icon),1)):Fe("",!0),(K(!0),J(ti,null,qd(e.$root.$options.layerTypes,(o,n)=>(K(),J(ti,{key:n},[n!="group"&&s.isAllowedToAdd(o,n)?(K(),J("span",{key:0,class:"wpc-layer-add-control material-icons",onClick:G(l=>e.$emit("add-layer",n),["stop"])},ct(o.icon),9,tp)):Fe("",!0)],64))),128))])])])}var ip=h(Kd,[["render",sp]]);const si=window.Vue.nextTick,op={props:{layer:Object,parent:[Object,Boolean],parentLayer:Object},components:{layerControls:ip},data(){return{editing:!1}},computed:{activeLayer:{get(){let e=this.$store.getters.getActiveLayer;return e||(this.activeLayer=this.$store.state.layers[0],this.$store.state.layers[0])},set(e){this.$store.state.activeLayer=e,this.$store.state.activeLayerCollection=this.parent,this.$store.state.activeLayerParent=this.parentLayer}},isParent(){return this.layer.children&&this.layer.children.length},isOpen:{get(){return!$(this.layer.actions)&&!$(this.layer.actions.open)?this.layer.actions.open:!0},set(e){this.$store.dispatch("toggleLayer",{layer:this.layer,action:e})}}},created(){this.$store.state.simplifiedLayers[this.layer.uid]={},this.$store.state.simplifiedLayers[this.layer.uid].item=this.layer,this.$store.state.simplifiedLayers[this.layer.uid].parent=this.parentLayer},beforeUpdate(){this.activeLayer.uid===this.layer.uid&&(this.activeLayer=this.layer),this.$store.state.simplifiedLayers[this.layer.uid]={},this.$store.state.simplifiedLayers[this.layer.uid].item=this.layer,this.$store.state.simplifiedLayers[this.layer.uid].parent=this.parentLayer},beforeUnmount(){this.deleteRelatedEditorImages(),delete this.$store.state.simplifiedLayers[this.layer.uid]},methods:{deleteRelatedEditorImages(){let e=wpc.editor.image_fields,t=this.layer.settings;!t||Object.keys(e).forEach(i=>{let r=e[i].layer;i==="non_view_control"?r.forEach(a=>{let s=t[a];s&&delete wpc.editor.images[s]}):i==="view_control"&&Object.values(this.$store.state.views).forEach(a=>{let s=a.id;r.forEach(o=>{if(t.views){let n=t.views[s],l=n?n[o]:!1;l&&delete wpc.editor.images[l]}})})})},toggleLayer(e){this.isOpen=!this.isOpen},layerClicked(e){this.activeLayer=this.layer,this.$store.state.activeHotspot=!1},addLayer(e){this.isOpen=e!=="group"?!0:this.isOpen,e!=="sub_group"&&this.$store.dispatch("addLayer",{layer:this.layer,parent:this.parent,layerType:e})},duplicateLayer(){this.$store.dispatch("duplicateLayer",{layer:this.layer,parent:this.parent})},deleteLayer(){this.setActiveBeforeDelete(),si(()=>{this.$store.dispatch("deleteLayer",{layer:this.layer,parent:this.parent})})},setActiveBeforeDelete(){if(this.activeLayer.uid!==this.layer.uid)return;if(this.parent.length>1){let t=this.parent.indexOf(this.layer);t<=0?this.$store.state.activeLayer=this.parent[1]:this.$store.state.activeLayer=this.parent[t-1]}else{let t=this.$parent.$parent.parent,i=this.$parent.$parent.$parent.$parent.$parent.parent;this.$store.state.activeLayer=t,this.$store.state.activeLayerParent=i||this.$store.state.layers,this.$store.state.activeLayerCollection=i&&i.children?i.children:""}},toggleVisibility(){this.$store.dispatch("toggleVisibility",{layerUid:this.layer.uid})},toggleLock(){this.$store.dispatch("toggleLock",{layerUid:this.layer.uid})},editingLayerName(){this.editing=!0,si(()=>{this.$refs.layerName.focus()})},isUndefined(e){return $(e)}}},H=window.Vue.createElementVNode,ii=window.Vue.withModifiers,Pe=window.Vue.openBlock,dt=window.Vue.createElementBlock,pt=window.Vue.createCommentVNode,oi=window.Vue.toDisplayString,ap=window.Vue.withKeys,ai=window.Vue.resolveComponent,ni=window.Vue.normalizeClass,np=window.Vue.createVNode,rp=window.Vue.vShow,lp=window.Vue.withDirectives,cp=window.Vue.createBlock,dp=["data-uid"],pp={class:"wpc-group-list-inner"},up=H("span",{class:"material-icons wpc-top-drag-icon"},"drag_indicator",-1),hp=H("div",{class:"wpc-line-on-group"},null,-1),_p=H("div",{class:"wpc-bg-on-group"},null,-1),vp={class:"wpc-text-group"},yp={class:"wpc-text-wrap"},gp=H("span",{class:"material-icons"},"keyboard_arrow_down",-1),mp=[gp],fp={class:"material-icons"},$p={key:1,class:"wpc-text"},Vp={key:2,class:"wpc-layer-title-input"},Lp=["value"];function kp(e,t,i,r,a,s){const o=ai("layer-controls"),n=ai("layers");return Pe(),dt("li",{class:ni(["wpc-group-list",{"wpc-active":s.activeLayer.uid===i.layer.uid,"wpc-has-children":s.isParent,"wpc-group-list-opened":s.isParent&&s.isOpen}]),onClick:t[5]||(t[5]=ii((...l)=>s.layerClicked&&s.layerClicked(...l),["stop"])),"data-uid":i.layer.uid},[H("div",pp,[up,hp,_p,H("div",vp,[H("div",yp,[s.isParent?(Pe(),dt("div",{key:0,class:"wpc-arrow-down",onClick:t[0]||(t[0]=ii((...l)=>s.toggleLayer&&s.toggleLayer(...l),["stop"]))},mp)):pt("",!0),H("span",fp,oi(e.$root.$options.layerTypes[i.layer.type].icon),1),a.editing?pt("",!0):(Pe(),dt("span",$p,oi(i.layer.name),1)),a.editing?(Pe(),dt("span",Vp,[H("input",{type:"text",value:i.layer.name,onChange:t[1]||(t[1]=l=>e.$store.dispatch("updateLayerName",{layer:i.layer,name:l.target.value})),ref:"layerName",onFocus:t[2]||(t[2]=l=>l.target.select()),onBlur:t[3]||(t[3]=l=>a.editing=!1),onKeyup:t[4]||(t[4]=ap(l=>a.editing=!1,["enter"]))},null,40,Lp)])):pt("",!0)]),np(o,{class:ni({"wpc-hide":a.editing}),type:i.layer.type,show:!s.isUndefined(this.layer.actions)&&!s.isUndefined(this.layer.actions.show)?this.layer.actions.show:!0,lock:!s.isUndefined(this.layer.actions)&&!s.isUndefined(this.layer.actions.lock)?this.layer.actions.lock:!1,onAddLayer:s.addLayer,"onEdit:layername":s.editingLayerName,onDuplicate:s.duplicateLayer,onDelete:s.deleteLayer,onToggleVisibility:s.toggleVisibility,onToggleLock:s.toggleLock},null,8,["class","type","show","lock","onAddLayer","onEdit:layername","onDuplicate","onDelete","onToggleVisibility","onToggleLock"])])]),s.isParent?lp((Pe(),cp(n,{key:0,layers:i.layer.children,child:!0,parent:i.layer},null,8,["layers","parent"])),[[rp,s.isOpen]]):pt("",!0)],10,dp)}var bp=h(op,[["render",kp]]);const Cp={props:{isActive:{type:Boolean,default:!1},aspectRatio:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},originalWidth:{type:Number,default:100,validator:function(e){return e>0}},originalHeight:{type:Number,default:100,validator:function(e){return e>0}},w:{type:Number,default:100,validator:function(e){return e>0}},h:{type:Number,default:100,validator:function(e){return e>0}},x:{type:Number,default:0,validator:function(e){return typeof e=="number"}},y:{type:Number,default:0,validator:function(e){return typeof e=="number"}},z:{type:[String,Number],default:"auto"}},data(){return{left:this.x,top:this.y,width:this.w,height:this.h,positions:{clientX:null,clientY:null,movementX:0,movementY:0}}},computed:{aspectFactor(){return parseFloat(this.originalWidth)/parseFloat(this.originalHeight)},getStyle(){return{width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px",zIndex:this.z}},rect(){return{width:this.width,height:this.height,left:this.left,top:this.top}}},watch:{x(){this.left=this.x},y(){this.top=this.y},w(){this.width=this.w},h(){this.height=this.h},isActive:{immediate:!0,handler(){this.isActive?(document.addEventListener("keydown",this.adjustPosition),document.addEventListener("keydown",this.delete)):(document.removeEventListener("keydown",this.adjustPosition),document.addEventListener("keydown",this.delete))}}},methods:{startDrag:function(e){!this.isActive||(this.positions.clientX=e.clientX,this.positions.clientY=e.clientY,document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.stopDragging),document.addEventListener("mouseleave",this.stopDragging),this.$emit("dragStart",this.rect))},dragging:function(e){e.preventDefault(),this.positions.movementX=this.positions.clientX-e.clientX,this.positions.movementY=this.positions.clientY-e.clientY,this.positions.clientX=e.clientX,this.positions.clientY=e.clientY,this.top=Math.round(this.$refs.draggableContainer.offsetTop-this.positions.movementY),this.left=Math.round(this.$refs.draggableContainer.offsetLeft-this.positions.movementX),this.$emit("dragging",this.rect)},stopDragging(e){this.positions.clientX=null,this.positions.clientY=null,document.removeEventListener("mousemove",this.dragging),document.removeEventListener("mouseup",this.stopDragging),document.removeEventListener("mouseleave",this.stopDragging),this.$emit("dragStop",this.rect)},startResize:function(e){!this.isActive||(this.positions.clientX=e.clientX,this.positions.clientY=e.clientY,document.addEventListener("mousemove",this.resizing),document.addEventListener("mouseup",this.stopResizing),document.addEventListener("mouseleave",this.stopResizing),this.$emit("resizeStart",this.rect))},resizing:function(e){e.preventDefault(),this.positions.movementX=this.positions.clientX-e.clientX,this.positions.movementY=this.positions.clientY-e.clientY,this.positions.clientX=e.clientX,this.positions.clientY=e.clientY;let t=this.$refs.draggableContainer.getBoundingClientRect(),i=t.width-this.positions.movementX;this.width=i,this.aspectRatio?this.height=Math.round(i/this.aspectFactor):this.height=t.height-this.positions.movementY,this.$emit("resizing",this.rect)},stopResizing(e){this.positions.clientX=null,this.positions.clientY=null,document.removeEventListener("mousemove",this.resizing),document.removeEventListener("mouseup",this.stopResizing),document.removeEventListener("mouseleave",this.stopResizing),this.$emit("resizeStop",this.rect)},adjustPosition(e){if(!this.isActive||e.key!="ArrowUp"&&e.key!="ArrowDown"&&e.key!="ArrowLeft"&&e.key!="ArrowRight")return;let t=e.shiftKey?10:1;e.key=="ArrowUp"?(this.top=this.top-t,this.$emit("yMoved",this.top)):e.key=="ArrowDown"?(this.top=this.top+t,this.$emit("yMoved",this.top)):e.key=="ArrowLeft"?(this.left=this.left-t,this.$emit("xMoved",this.left)):e.key=="ArrowRight"&&(this.left=this.left+t,this.$emit("xMoved",this.left)),this.$emit("positionChanged",this.rect)},delete(e){!this.isActive||e.key!="Delete"||this.$emit("delete")}},beforeUnmount(){document.removeEventListener("keydown",this.adjustPosition)}},Tp=window.Vue.renderSlot,ri=window.Vue.withModifiers,li=window.Vue.openBlock,ci=window.Vue.createElementBlock,Ep=window.Vue.createCommentVNode,Sp=window.Vue.normalizeClass,Ap=window.Vue.normalizeStyle;function Np(e,t,i,r,a,s){return li(),ci("div",{class:Sp(["wpc-draggable",{"active-draggable":i.isActive}]),onMousedown:t[1]||(t[1]=ri((...o)=>s.startDrag&&s.startDrag(...o),["prevent"])),ref:"draggableContainer",style:Ap(s.getStyle)},[Tp(e.$slots,"default"),i.resize?(li(),ci("span",{key:0,class:"wpc-draggable-resizer material-icons",onMousedown:t[0]||(t[0]=ri((...o)=>s.startResize&&s.startResize(...o),["prevent","stop"]))},"filter_list",32)):Ep("",!0)],38)}var di=h(Cp,[["render",Np]]);function xp(){window.wpcEditorUtils=window.wpcEditorUtils||{},Object.keys(_s).forEach(e=>{wpcEditorUtils[e]=_s[e]}),wpcEditorUtils.getGlobalComponents=()=>({sortable:St,dragResize:di})}var b={props:{control:{type:Object,required:!0},type:String},created(){!this.control.default||(this.activeLayer.settings=this.activeLayer.settings||{},this.control.support_view?(this.activeLayer.settings.views=this.activeLayer.settings.views||{},this.$store.state.views.forEach(e=>{this.activeLayer.settings.views[e.id]=this.activeLayer.settings.views[e.id]||this.control.default})):this.activeLayer.settings[this.type]=this.activeLayer.settings[this.type]||this.control.default)},computed:{views(){return this.$store.state.views},activeLayer(){return this.$store.state.activeTab==="layer_controls"?this.$store.state.activeLayer:{settings:this.$store.state.settings[this.$store.state.activeTab]}},value:{get(){let e;return this.$store.state.activeTab==="layer_controls"?this.control.support_view?e=this.activeLayer.settings&&this.activeLayer.settings.views?this.activeLayer.settings.views:{}:e=this.activeLayer.settings&&this.activeLayer.settings&&this.activeLayer.settings[this.type]?this.activeLayer.settings[this.type]:"":e=this.activeLayer.settings[this.type],e},set(e){let t={value:e,type:this.type,name:this.control.name};this.control.support_view==!0&&(t.view=this.curView),this.$store.state.activeTab==="layer_controls"?this.$store.dispatch("updateSettings",t):this.$store.dispatch("updateSettingsTab",t)}}},methods:{updateSettings(e,t){this.$store.state.activeTab==="layer_controls"?this.$store.dispatch("updateSettings",{value:t,type:this.type,view:e,name:this.control.name}):this.$store.dispatch("updateSettingsTab",{value:t,type:this.type,view:e,name:this.control.name})},stringToBoolean(e){if(typeof e=="boolean")return e;if(typeof e=="string")switch(e.toLowerCase().trim()){case"true":case"yes":case"1":case"show":return!0;case"false":case"no":case"0":case"hide":case null:return!1;default:return Boolean(e)}else return!1}}};const Bp={mixins:[b],computed:{activeViewId(){var e,t;return((e=this.control)==null?void 0:e.support_view)?(t=this.$store.state.activeView)==null?void 0:t.id:null}},methods:{activeLayerValue(){let e;return this.control.options?e=this.control.default&&Array.isArray(this.control.default)?this.control.default:[]:e=this.control.default&&typeof this.control.default=="boolean"?this.control.default:!1,this.control.support_view?this.activeLayer.settings&&this.activeLayer.settings.views&&this.activeLayer.settings.views[this.activeViewId]&&this.activeLayer.settings.views[this.activeViewId][this.type]?this.activeLayer.settings.views[this.activeViewId][this.type]:e:this.activeLayer.settings&&this.activeLayer.settings&&this.activeLayer.settings[this.type]?this.activeLayer.settings[this.type]:e},getValue(){return this.activeLayerValue()},isChecked(e){let t=this.getValue();return this.control.options?t.includes(e):stringToBoolean(e)},setValue(e,t){if(!this.control.options)this.value=t.target.checked;else{let i=this.value||[],r=t.target.checked,a=t.target.value;if(r)i.includes(a)||i.push(a);else{let s=i.indexOf(a);i.splice(s,1)}this.updateSettings(null,i)}}}},Ye=window.Vue.toDisplayString,R=window.Vue.createElementVNode,Xt=window.Vue.Fragment,ue=window.Vue.openBlock,he=window.Vue.createElementBlock;window.Vue.createCommentVNode;const pi=window.Vue.renderList,jt=window.Vue.normalizeClass,Op=window.Vue.createTextVNode,Dp={class:"wpc-title-set"},Ip={class:"wpc-title"},zp=["id","checked"],Fp=["for"],Pp=["id","checked","value"],Yp=["for"],Hp=["checked","onChange","id"],Rp=["for"];function Mp(e,t,i,r,a,s){return ue(),he("div",{class:jt(["wpce-group-field",e.control.separator==!1?"wpc-sep-hide":""])},[R("div",Dp,[R("span",Ip,Ye(e.control.name),1)]),e.control.support_view?(ue(!0),he(Xt,{key:1},pi(e.$store.state.views,o=>(ue(),he("div",{class:jt(["wpc-input-element",e.control.class]),key:o.id},[R("input",{type:"checkbox",checked:e.value[o.id]&&e.value[o.id][e.type]?e.value[o.id][e.type]:e.control.default,onChange:n=>s.setValue(o.id,n),autocomplete:"off",id:e.type+"-"+o.id},null,40,Hp),R("label",{class:"title-set",for:e.type+"-"+o.id},[Op(Ye(e.control.desc)+" ",1),R("strong",null,"("+Ye(o.name)+")",1)],8,Rp)],2))),128)):(ue(),he("div",{key:0,class:jt(["wpc-input-element",e.control.class])},[e.control.options?(ue(!0),he(Xt,{key:1},pi(e.control.options,(o,n)=>(ue(),he("div",null,[R("input",{id:e.type+"-"+n,type:"checkbox",checked:s.isChecked(n),onChange:t[1]||(t[1]=l=>s.setValue("",l)),value:n,autocomplete:"off"},null,40,Pp),R("label",{for:e.type+"-"+n,class:"title-set"},Ye(o),9,Yp)]))),256)):(ue(),he(Xt,{key:0},[R("input",{type:"checkbox",id:e.type,checked:e.value?e.stringToBoolean(e.value):e.stringToBoolean(e.control.default),onChange:t[0]||(t[0]=o=>s.setValue("",o)),autocomplete:"off"},null,40,zp),R("label",{class:"title-set",for:e.type},Ye(e.control.desc),9,Fp)],64))],2))],2)}var Xp=h(Bp,[["render",Mp]]);let ui;const jp={mixins:[b],components:{ColorPicker:qe},data(){return{activeView:"",showPicker:!1}},methods:{getValue(e){return this.value[e.id]&&this.value[e.id][this.type]?this.value[e.id][this.type]:this.control.default},changeColor(e,t){let i=t&&t.id?t.id:"";const{r,g:a,b:s,a:o}=e.rgba;e=`rgba(${r}, ${a}, ${s}, ${o})`,clearTimeout(ui),ui=setTimeout(()=>{this.updateSettings(i,e)},300)}}},Up=window.Vue.toDisplayString,I=window.Vue.createElementVNode,hi=window.Vue.normalizeStyle,Wp=window.Vue.resolveComponent,q=window.Vue.openBlock,wi=window.Vue.createBlock,ut=window.Vue.createCommentVNode,_i=window.Vue.withModifiers,Ve=window.Vue.createElementBlock,Ut=window.Vue.normalizeClass,Gp=window.Vue.renderList,Kp=window.Vue.Fragment,Jp=["for"],qp={class:"wpc-title"},Zp={class:"wpc-color-input-wrap"},Qp={class:"wpc-choosen-color-wrap"},eu=["id","value"],tu={class:"wpc-color-input-wrap"},su={class:"wpc-choosen-color-wrap"},iu=["value","onChange","onClick"];function ou(e,t,i,r,a,s){const o=Wp("ColorPicker");return q(),Ve("div",{class:Ut(["wpce-group-field",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[I("label",{class:"wpc-title-set",for:e.control.support_view?"":e.type},[I("span",qp,Up(e.control.name),1)],8,Jp),e.control.support_view?(q(!0),Ve(Kp,{key:1},Gp(e.$store.state.views,n=>(q(),Ve("div",{class:Ut(["wpc-input-element",e.control.class]),key:n.id},[I("div",tu,[I("div",su,[I("div",{class:"wpc-choosen-color",style:hi({backgroundColor:s.getValue(n)})},null,4)]),I("input",{class:"wpc-color-input",type:"text",value:s.getValue(n),onChange:l=>e.updateSettings(n.id,l.target.value),onClick:l=>a.activeView=a.activeView&&a.activeView==n.id?"":n.id},null,40,iu),a.activeView===n.id?(q(),wi(o,{key:0,color:s.getValue(n),"sucker-hide":!0,onChangeColor:l=>s.changeColor(l,n)},null,8,["color","onChangeColor"])):ut("",!0),a.activeView===n.id?(q(),Ve("span",{key:1,class:"material-icons",onClick:t[4]||(t[4]=_i(l=>a.activeView="",["stop"]))},"clear")):ut("",!0)])],2))),128)):(q(),Ve("div",{key:0,class:Ut(["wpc-input-element",e.control.class])},[I("div",Zp,[I("div",Qp,[I("div",{class:"wpc-choosen-color",style:hi({backgroundColor:e.value})},null,4)]),I("input",{class:"wpc-color-input",type:"text",id:e.type,value:e.value?e.value:e.control.default,onClick:t[0]||(t[0]=n=>a.showPicker=!a.showPicker),onInput:t[1]||(t[1]=n=>e.value=n.target.value),autocomplete:"off"},null,40,eu),a.showPicker?(q(),wi(o,{key:0,color:e.value,"sucker-hide":!0,onChangeColor:t[2]||(t[2]=n=>s.changeColor(n,""))},null,8,["color"])):ut("",!0),a.showPicker?(q(),Ve("span",{key:1,class:"material-icons",onClick:t[3]||(t[3]=_i(n=>a.showPicker=!1,["stop"]))},"clear")):ut("",!0)])],2))],2)}var au=h(jp,[["render",ou]]);const nu={props:{control:{type:Object,required:!0}},computed:{activeLayer(){return this.$store.state.activeLayer}},methods:{updateType(e){this.$store.dispatch("setLayerType",{type:e})}}},He=window.Vue.toDisplayString,Z=window.Vue.createElementVNode,ru=window.Vue.renderList,vi=window.Vue.Fragment,ht=window.Vue.openBlock,wt=window.Vue.createElementBlock,yi=window.Vue.createCommentVNode,lu=window.Vue.normalizeClass,cu={class:"wpc-title-inner-set"},du={class:"wpc-layer-type-text"},pu={class:"wpc-layer-type-wrap"},uu={class:"wpc-layer-type"},hu={class:"wpc-layer-type-dropdown"},wu=["onClick"],_u={class:"material-icons"},vu={class:"wpc-control-desc"};function yu(e,t,i,r,a,s){return s.activeLayer.type!=="group"?(ht(),wt("div",{key:0,class:lu(["wpce-group-field",i.control.separator==!1?"wpc-sep-hide":""])},[Z("div",cu,[Z("span",du,He(i.control.name),1),Z("span",pu,[Z("span",uu,He(e.$root.$options.layerTypes[s.activeLayer.type].name),1),Z("span",hu,[(ht(!0),wt(vi,null,ru(e.$root.$options.layerTypes,(o,n)=>(ht(),wt(vi,{key:n},[n!=="group"&&n!==s.activeLayer.type?(ht(),wt("span",{key:0,class:"wpc-layer-type-select",onClick:l=>s.updateType(n)},[Z("span",_u,He(o.icon),1),Z("span",null,He(o.name),1)],8,wu)):yi("",!0)],64))),128))])]),Z("span",vu,He(i.control.desc),1)])],2)):yi("",!0)}var gu=h(nu,[["render",yu]]);const mu={mixins:[b],methods:{setValue(e){this.value=e},checkActive(e,t){let i=this.value[e.id]&&this.value[e.id][this.type],r=i&&this.value[e.id][this.type]?this.value[e.id][this.type]:"";if(r&&r===t)return"wpc-active-view";if((!i||!r)&&t===this.control.default)return"wpc-active-view"}}},Q=window.Vue.toDisplayString,x=window.Vue.createElementVNode,fu=window.Vue.createTextVNode,Wt=window.Vue.renderList,Gt=window.Vue.Fragment,ee=window.Vue.openBlock,te=window.Vue.createElementBlock,Re=window.Vue.normalizeClass;window.Vue.createCommentVNode;const $u={class:"wpc-layer-type-text"},Vu={class:"wpc-layer-type-wrap"},Lu={class:"wpc-layer-type"},ku=x("span",{class:"material-icons"},"edit",-1),bu={class:"wpc-layer-type-dropdown"},Cu=["onClick"],Tu={class:"wpc-control-desc"},Eu={class:"wpc-layer-type-text"},Su={class:"wpc-layer-type-wrap"},Au={class:"wpc-layer-type"},Nu={class:"wpc-layer-type-dropdown"},xu=["onClick"],Bu={class:"wpc-control-desc"};function Ou(e,t,i,r,a,s){return ee(),te("div",{class:Re(["wpce-group-field",e.control.separator==!1?"wpc-sep-hide":""])},[e.control.support_view?(ee(!0),te(Gt,{key:1},Wt(e.$store.state.views,o=>(ee(),te("div",{class:Re(["wpc-title-inner-set",e.control.class]),key:o.id},[x("span",Eu,Q(e.control.name),1),x("span",Su,[x("span",Au,Q(e.value[o.id]&&e.value[o.id][e.type]?e.control.options[e.value[o.id][e.type]]:e.control.options[e.control.default]),1),x("span",Nu,[(ee(!0),te(Gt,null,Wt(e.control.options,(n,l)=>(ee(),te("span",{key:n,class:Re(["wpc-layer-type-select",s.checkActive(o,l)]),onClick:p=>e.updateSettings(o.id,l)},Q(n),11,xu))),128))])]),x("span",Bu,Q(e.control.desc),1)],2))),128)):(ee(),te("div",{key:0,class:Re(["wpc-title-inner-set",e.control.class])},[x("span",$u,Q(e.control.name),1),x("span",Vu,[x("span",Lu,[fu(Q(e.value?e.control.options[e.value]:e.control.options[e.control.default]),1),ku]),x("span",bu,[(ee(!0),te(Gt,null,Wt(e.control.options,(o,n)=>(ee(),te("span",{key:o,class:Re(["wpc-layer-type-select",e.value===n&&e.value!=""||!e.value&&n===e.control.default?"wpc-active-view":""]),onClick:l=>s.setValue(n)},Q(o),11,Cu))),128))])]),x("span",Tu,Q(e.control.desc),1)],2))],2)}var Du=h(mu,[["render",Ou]]);const Iu={props:{control:{type:Object,required:!0},type:String},data(){return{curView:""}},computed:{activeLayer(){return this.$store.state.activeLayer},value:{get(){let e;return this.$store.state.activeTab==="layer_controls"?this.control.support_view?e=this.activeLayer.settings&&this.activeLayer.settings.views?this.activeLayer.settings.views:{}:e=this.activeLayer.settings&&this.activeLayer.settings&&this.activeLayer.settings[this.type]?this.activeLayer.settings[this.type]:"":this.control.support_view?e=this.$store.state.settings&&this.$store.state.settings[this.$store.state.activeTab][this.type]?this.$store.state.settings[this.$store.state.activeTab][this.type]:{}:e=this.$store.state.settings&&this.$store.state.settings[this.$store.state.activeTab][this.type]?this.$store.state.settings[this.$store.state.activeTab][this.type]:"",e},set(e){let t={value:e,type:this.type,name:this.control.name};this.control.support_view==!0&&(t.view=this.curView),this.$store.state.activeTab==="layer_controls"?this.$store.dispatch("updateSettings",t):this.$store.dispatch("updateSettingsTab",t)}}},methods:{hasImage(e){if(this.$store.state.activeTab==="layer_controls"){if(this.control.support_view)return this.value[e]&&this.value[e][this.type]}else return this.value[e]&&this.value[e]},getImageSrc(e){let t;return this.$store.state.activeTab==="layer_controls"?this.control.support_view?t=this.value[e]&&this.value[e][this.type]?this.value[e][this.type]:"":t=this.value?this.value:"":this.control.support_view?t=this.value[e]?this.value[e]:"":t=this.value?this.value:"",t?this.$root.$options.editor.images[t]&&this.$root.$options.editor.images[t].src:""},clearValue(e,t){this.curView=e,delete this.$root.$options.editor.images[t],this.value="",this.curView=""},mediaManager(e){this.curView=e,wpc.curMediaControl=this,wp.media.frames.wpcFrame||this.initMediaManager(),wp.media.frames.wpcFrame.open()},initMediaManager(){let e=this,t=wp.media.frames.wpcFrame=wp.media({library:{type:"image"}});t.on("open",function(){let i=wpc.curMediaControl,r,a;i.control.support_view?r=i.value[i.curView]&&i.value[i.curView].image?i.value[i.curView].image:"":r=i.value,a=r?wp.media.attachment(r):[],t.state().get("selection").add([a])}),t.on("select",function(){let i=wpc.curMediaControl,r=t.state().get("selection").first().toJSON();e.$root.$options.editor.images[r.id]=e.$root.$options.editor.images[r.id]||{uid:i.activeLayer.uid,key:i.type,src:r.url,width:r.width,height:r.height},i.value=r.id,i.curView=""})}}},Kt=window.Vue.toDisplayString,E=window.Vue.createElementVNode,se=window.Vue.openBlock,ie=window.Vue.createElementBlock;window.Vue.createCommentVNode;const _t=window.Vue.withModifiers,Jt=window.Vue.normalizeClass,zu=window.Vue.renderList,Fu=window.Vue.Fragment,Pu={class:"wpc-title-set wpc-layer-field-text"},Yu={class:"wpc-title"},Hu={class:"wpc-control-desc"},Ru={class:"wpc-product-choose"},Mu={class:"wpc-group-icon"},Xu={key:0,class:"material-icons"},ju={key:1,class:"wpc-selected-image"},Uu=["src"],Wu={class:"wpc-group-icon"},Gu=["onClick"],Ku={key:0,class:"material-icons"},Ju={key:1,class:"wpc-selected-image"},qu=["src"],Zu=["onClick"],Qu={class:"wpc-text-bottom"};function eh(e,t,i,r,a,s){return se(),ie("div",{class:Jt(["wpce-group-field",i.control.separator==!1?"wpc-sep-hide":""])},[E("label",Pu,[E("span",Yu,Kt(i.control.name),1),E("span",Hu,Kt(i.control.desc),1)]),E("div",Ru,[i.control.support_view?(se(!0),ie(Fu,{key:1},zu(e.$store.state.views,o=>(se(),ie("div",{class:Jt(["wpc-choose-icon text-center",i.control.class]),key:o.id},[E("div",Wu,[E("div",{class:"wpc-select-image",onClick:_t(n=>s.mediaManager(o.id),["stop"])},[s.hasImage(o.id)?(se(),ie("span",Ju,[E("img",{src:s.getImageSrc(o.id),alt:""},null,8,qu),E("span",{class:"material-icons",onClick:_t(n=>s.clearValue(o.id,s.value[o.id][i.type]),["stop"])},"clear",8,Zu)])):(se(),ie("span",Ku,"image"))],8,Gu)]),E("p",Qu,Kt(o.name),1)],2))),128)):(se(),ie("div",{key:0,class:Jt(["wpc-choose-icon text-center",i.control.class])},[E("div",Mu,[E("div",{class:"wpc-select-image",onClick:t[1]||(t[1]=_t((...o)=>s.mediaManager&&s.mediaManager(...o),["stop"]))},[s.value?(se(),ie("span",ju,[E("img",{src:s.getImageSrc(s.value),alt:""},null,8,Uu),E("span",{class:"material-icons",onClick:t[0]||(t[0]=_t(o=>s.clearValue("",s.value),["stop"]))},"clear")])):(se(),ie("span",Xu,"image"))])])],2))])],2)}var th=h(Iu,[["render",eh]]);const sh={mixins:[b],computed:{disabled(){var e;return!!((e=this.control)==null?void 0:e.disabled)},options(){return this.control.sort==="alphabetical"?this.sortedOption:this.control.options},sortedOption(){let e=Object.entries(this.control.options);return e.sort(function(t,i){return t[1]<i[1]?-1:t[1]>i[1]?1:0}),e}},methods:{isOptionDisabled(e){var i;const t=(i=this.control)==null?void 0:i.disabled_options;return!!(t&&t.includes(e))},getSelected(e){return this.value===e?!0:e===this.control.default}}},we=window.Vue.toDisplayString,vt=window.Vue.createElementVNode,Me=window.Vue.renderList,Xe=window.Vue.Fragment,S=window.Vue.openBlock,A=window.Vue.createElementBlock;window.Vue.createCommentVNode;const gi=window.Vue.createTextVNode,qt=window.Vue.normalizeClass,ih=["for"],oh={class:"wpc-title"},ah=["id","disabled"],nh=["disabled","value","selected"],rh=["disabled","value","selected"],lh=["disabled","onChange"],ch=["disabled","value","selected"],dh=["disabled","value","selected"];function ph(e,t,i,r,a,s){return S(),A("div",{class:qt(["wpce-group-field",e.control.separator==!1?"wpc-sep-hide":""])},[vt("label",{class:"wpc-title-set",for:e.type},[vt("span",oh,we(e.control.name),1)],8,ih),e.control.support_view?(S(!0),A(Xe,{key:1},Me(e.$store.state.views,o=>(S(),A("div",{class:qt(["wpc-input-element",e.control.class]),key:o.id},[vt("select",{disabled:s.disabled,autocomplete:"off",onChange:n=>e.updateSettings(o.id,n.target.value)},[e.control.sort==="alphabetical"?(S(!0),A(Xe,{key:0},Me(s.options,(n,l,p)=>(S(),A("option",{key:n[0],disabled:s.isOptionDisabled(n[0]),value:n[0],selected:!e.value&&p===0||e.value[o.id]&&e.value[o.id][e.type]&&(e.value[o.id][e.type]===n[0]||e.value[o.id][e.type]===e.control.default)},we(n[1]),9,ch))),128)):(S(!0),A(Xe,{key:1},Me(s.options,(n,l,p)=>(S(),A("option",{key:n,disabled:s.isOptionDisabled(l),value:l,selected:!e.value&&p===0||e.value[o.id]&&e.value[o.id][e.type]&&(e.value[o.id][e.type]===l||e.value[o.id][e.type]===e.control.default)},we(n),9,dh))),128))],40,lh)],2))),128)):(S(),A("div",{key:0,class:qt(["wpc-input-element",e.control.class])},[gi(we(e.val)+" ",1),vt("select",{id:e.type,disabled:s.disabled,autocomplete:"off",onChange:t[0]||(t[0]=o=>e.value=o.target.value)},[e.control.sort==="alphabetical"?(S(!0),A(Xe,{key:0},Me(s.options,(o,n)=>(S(),A("option",{key:o[0],disabled:s.isOptionDisabled(o[0]),value:o[0],selected:s.getSelected(o[0])},we(o[1]),9,nh))),128)):(S(!0),A(Xe,{key:1},Me(s.options,(o,n)=>(S(),A("option",{key:o,disabled:s.isOptionDisabled(n),value:n,selected:s.getSelected(n)},we(o),9,rh))),128))],40,ah)],2)),gi(" "+we(e.control.desc),1)],2)}var uh=h(sh,[["render",ph]]);const hh={mixins:[b]},mi=window.Vue.toDisplayString,je=window.Vue.createElementVNode,Zt=window.Vue.normalizeClass,yt=window.Vue.openBlock,gt=window.Vue.createElementBlock;window.Vue.createCommentVNode;const wh=window.Vue.renderList,_h=window.Vue.Fragment,vh=["for"],yh={class:"wpc-title"},gh=["id","value"],mh=["value","onChange"],fh={class:"wpc-control-desc"};function $h(e,t,i,r,a,s){return yt(),gt("div",{class:Zt(["wpce-group-field",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[je("label",{class:"wpc-title-set",for:e.control.support_view?"":e.type},[je("span",yh,mi(e.control.name),1)],8,vh),e.control.support_view?(yt(!0),gt(_h,{key:1},wh(e.$store.state.views,o=>(yt(),gt("div",{class:Zt(["wpc-input-element",e.control.class]),key:o.id},[je("input",{class:"wpc-price",type:"text",value:e.value[o.id]&&e.value[o.id][e.type]?e.value[o.id][e.type]:e.control.default,onChange:n=>e.updateSettings(o.id,n.target.value)},null,40,mh)],2))),128)):(yt(),gt("div",{key:0,class:Zt(["wpc-input-element",e.control.class])},[je("input",{class:"wpc-price",type:"text",id:e.type,value:e.value?e.value:e.control.default,onChange:t[0]||(t[0]=o=>e.value=o.target.value),autocomplete:"off"},null,40,gh)],2)),je("span",fh,mi(e.control.desc),1)],2)}var Vh=h(hh,[["render",$h]]);const Lh={mixins:[b],computed:{disabled(){var e;return!!((e=this.control)==null?void 0:e.disabled)},activeViewId(){var e,t;return((e=this.control)==null?void 0:e.support_view)?(t=this.$store.state.activeView)==null?void 0:t.id:null}},methods:{activeLayerValue(){return this.control.support_view?this.activeLayer.settings&&this.activeLayer.settings.views&&this.activeLayer.settings.views[this.activeViewId]&&this.activeLayer.settings.views[this.activeViewId][this.type]?this.activeLayer.settings.views[this.activeViewId][this.type]:"":this.activeLayer.settings&&this.activeLayer.settings&&this.activeLayer.settings[this.type]?this.activeLayer.settings[this.type]:""},getValue(){return this.activeLayerValue()},setValue(e){this.updateSettings(this.activeViewId,e)}}},kh=window.Vue.toDisplayString,mt=window.Vue.createElementVNode,fi=window.Vue.normalizeClass,bh=window.Vue.openBlock,Ch=window.Vue.createElementBlock,Th={class:"wpc-title-set"},Eh={class:"wpc-title"},Sh=["value","disabled"];function Ah(e,t,i,r,a,s){return bh(),Ch("div",{class:fi(["wpce-group-field",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[mt("label",Th,[mt("span",Eh,kh(e.control.name),1)]),mt("div",{class:fi(["wpc-input-element",e.control.class+" "+e.control.mod?"wpc-text-area-"+e.control.mod:""])},[mt("textarea",{class:"wpc-price 2",type:"text",value:s.getValue(),disabled:s.disabled,onChange:t[0]||(t[0]=o=>s.setValue(o.target.value)),autocomplete:"off"},null,40,Sh)],2)],2)}var Nh=h(Lh,[["render",Ah]]);const xh={mixins:[b],data(){return{showPreset:!1}},computed:{activeViewId(){var e,t;return((e=this.control)==null?void 0:e.support_view)?(t=this.$store.state.activeView)==null?void 0:t.id:null},getViews(){return this.$store.state.views},viewCount(){return this.getViews.length},selectDefaultText(){return wp.i18n.__("Select View")}},methods:{activeLayerValue(){let e=this.control.multiple?{}:"";return this.control.support_view?this.activeLayer.settings&&this.activeLayer.settings.views&&this.activeLayer.settings.views[this.activeViewId]&&this.activeLayer.settings.views[this.activeViewId][this.type]?this.activeLayer.settings.views[this.activeViewId][this.type]:e:this.activeLayer.settings&&this.activeLayer.settings&&this.activeLayer.settings[this.type]?this.activeLayer.settings[this.type]:e},getValue(){return this.activeLayerValue()},getView(e){let t=this.getViews,i=Object.values(t).find(r=>r.id==e);return i?i.name:"Select View"},openPreset(){this.showPreset=!this.showPreset},selectView(e){this.control.multiple?(this.selectedView=this.getValue()||{},Object.keys(this.selectedView).includes(e.id)?delete this.selectedView[e.id]:this.selectedView[e.id]=e.name):this.selectedView=this.selectedView==e.id?"":e.id,this.control.support_view?this.updateSettings(this.activeViewId,this.selectedView):this.updateSettings(null,this.selectedView)},isSelected(e){return this.selectedView=this.getValue(),typeof this.selectedView=="object"&&!Array.isArray(this.selectedView)&&this.selectedView!==null?Object.keys(this.selectedView).includes(e):this.selectedView==e}}},Ue=window.Vue.toDisplayString,z=window.Vue.createElementVNode,$i=window.Vue.renderList,Vi=window.Vue.Fragment,oe=window.Vue.openBlock,ae=window.Vue.createElementBlock,Li=window.Vue.withModifiers,Bh=window.Vue.createCommentVNode,ki=window.Vue.createTextVNode,ft=window.Vue.normalizeClass,Oh=["for"],Dh={class:"wpc-title"},Ih=["id"],zh={key:0,class:"wpc-multiple-select-wrap wpc-allow-multiple"},Fh={class:"wpc-multiple-select-inner"},Ph={key:2,class:"wpc-multiple-preset-lists"},Yh=z("li",null,"Select View",-1),Hh=["onClick"],Rh=z("span",{class:"wpc-check-box-wrap"},[z("span",{class:"wpc-check-box material-icons"},"check")],-1);function Mh(e,t,i,r,a,s){return oe(),ae("div",{class:ft(["wpce-group-field",e.control.separator==!1?"wpc-sep-hide":""])},[z("label",{class:"wpc-title-set",for:e.type},[z("span",Dh,Ue(e.control.name),1)],8,Oh),z("div",{class:ft(["wpc-input-element",e.control.class])},[z("div",{id:e.type,class:ft("wpc-control-"+e.control.type)},[e.control.multiple?(oe(),ae("div",zh,[z("div",Fh,[z("div",{class:"wpc-multiple-select",onClick:t[0]||(t[0]=Li((...o)=>s.openPreset&&s.openPreset(...o),["self"]))},[(oe(!0),ae(Vi,null,$i(e.value,(o,n)=>(oe(),ae("div",null,Ue(o),1))),256))])])])):(oe(),ae("div",{key:1,onClick:t[1]||(t[1]=Li((...o)=>s.openPreset&&s.openPreset(...o),["self"])),class:"wpc-multiple-select-wrap wpc-not-allow-multiple"},Ue(s.getView(e.value)),1)),a.showPreset?(oe(),ae("div",Ph,[z("ul",null,[Yh,(oe(!0),ae(Vi,null,$i(s.getViews,(o,n)=>(oe(),ae("li",{onClick:l=>s.selectView(o),class:ft({active:s.isSelected(o.id)})},[Rh,ki(" "+Ue(o.name),1)],10,Hh))),256))])])):Bh("",!0)],10,Ih)],2),ki(" "+Ue(e.control.desc),1)],2)}var Xh=h(xh,[["render",Mh]]);const jh=window.Vue.nextTick;let bi;const Uh={mixins:[b],components:{ColorPicker:qe},data(){return{showPicker:!1,shadow:[{h:"",v:"",blur:"",color:""}],currentColor:"",editIndex:""}},computed:{activeViewId(){var e,t;return((e=this.control)==null?void 0:e.support_view)?(t=this.$store.state.activeView)==null?void 0:t.id:null}},methods:{activeLayerValue(){return this.control.support_view?this.activeLayer.settings&&this.activeLayer.settings.views&&this.activeLayer.settings.views[this.activeViewId]&&this.activeLayer.settings.views[this.activeViewId][this.type]?this.activeLayer.settings.views[this.activeViewId][this.type]:this.shadow:this.activeLayer.settings&&this.activeLayer.settings&&this.activeLayer.settings[this.type]?this.activeLayer.settings[this.type]:this.shadow},getValue(){return this.activeLayerValue()},changeColor(e){const{r:t,g:i,b:r,a}=e.rgba;e=`rgba(${t}, ${i}, ${r}, ${a})`,clearTimeout(bi),bi=setTimeout(()=>{this.shadow=this.getValue()||[],this.setTextShadow(this.editIndex,"color",e)},300)},addTextShadow(){let e={h:"",v:"",blur:"",color:""},t=this.getValue();t.push(e),this.shadow=t},editTextShadowColor(e){let t=this.getValue();this.showPicker=!1,this.currentColor=t[e].color,jh(()=>{this.showPicker=!0,this.editIndex=e})},setTextShadow(e,t,i){this.shadow=this.getValue()||[],this.shadow[e]=this.shadow[e]||{},this.shadow[e][t]=i,this.updateSettings(this.activeViewId,this.shadow)},removeShadow(e){let t=this.getValue();t.splice(e,1),this.updateSettings(this.activeViewId,t)}}},Wh=window.Vue.toDisplayString,m=window.Vue.createElementVNode,Gh=window.Vue.renderList,Kh=window.Vue.Fragment,We=window.Vue.openBlock,$t=window.Vue.createElementBlock,Jh=window.Vue.normalizeStyle,qh=window.Vue.resolveComponent,Zh=window.Vue.createBlock,Ci=window.Vue.createCommentVNode,Ti=window.Vue.withModifiers,Ei=window.Vue.normalizeClass,Qh=["for"],ew={class:"wpc-title"},tw={class:"wpc-text-input-wrap"},sw={class:"wpc-text-input-fields-group"},iw=m("span",null,"X:",-1),ow=["value","onChange"],aw=m("span",null,"Y:",-1),nw=["value","onChange"],rw=m("span",null,"B:",-1),lw=["value","onChange"],cw=["onClick"],dw=["onClick"];function pw(e,t,i,r,a,s){const o=qh("ColorPicker");return We(),$t("div",{class:Ei(["wpce-group-field wpc-type-text-shadow",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[m("label",{class:"wpc-title-set",for:e.control.support_view?"":e.type},[m("span",ew,Wh(e.control.name),1)],8,Qh),m("div",{class:Ei(["wpc-input-element",e.control.class])},[m("div",tw,[(We(!0),$t(Kh,null,Gh(s.activeLayerValue(),(n,l)=>(We(),$t("div",sw,[m("p",null,[iw,m("input",{type:"text",value:n.x,onChange:p=>s.setTextShadow(l,"x",p.target.value),autocomplete:"off"},null,40,ow)]),m("p",null,[aw,m("input",{type:"text",value:n.y,onChange:p=>s.setTextShadow(l,"y",p.target.value),autocomplete:"off"},null,40,nw)]),m("p",null,[rw,m("input",{type:"text",value:n.blur,onChange:p=>s.setTextShadow(l,"blur",p.target.value),autocomplete:"off"},null,40,lw)]),m("div",null,[m("div",{class:"wpc-choosen-color-wrap",onClick:p=>s.editTextShadowColor(l)},[m("div",{class:"wpc-choosen-color",style:Jh({backgroundColor:n.color})},null,4)],8,cw)]),m("span",{class:"wpc-remove-shadow-icon material-icons",onClick:p=>s.removeShadow(l)},"close",8,dw)]))),256)),a.showPicker?(We(),Zh(o,{key:0,color:a.currentColor,"sucker-hide":!0,onChangeColor:t[0]||(t[0]=n=>s.changeColor(n,""))},null,8,["color"])):Ci("",!0),a.showPicker?(We(),$t("span",{key:1,class:"material-icons",onClick:t[1]||(t[1]=Ti(n=>a.showPicker=!1,["stop"]))},"clear")):Ci("",!0),m("div",null,[m("span",{class:"wpc-simple-btn",onClick:t[2]||(t[2]=Ti(n=>s.addTextShadow(),["stop"]))},"Add")])])],2)],2)}var uw=h(Uh,[["render",pw]]);const hw={mixins:[b],data(){return{transformType:{"":"Choose Transfer Type","2d":"2D","3d":"3D"}}},computed:{activeViewId(){var e,t;return((e=this.control)==null?void 0:e.support_view)?(t=this.$store.state.activeView)==null?void 0:t.id:null}},methods:{isType(e){var i;return((i=this.activeLayerValue())==null?void 0:i.type)==e},activeLayerValue(){return this.control.support_view?this.activeLayer.settings&&this.activeLayer.settings.views&&this.activeLayer.settings.views[this.activeViewId]&&this.activeLayer.settings.views[this.activeViewId][this.type]?this.activeLayer.settings.views[this.activeViewId][this.type]:{}:this.activeLayer.settings&&this.activeLayer.settings&&this.activeLayer.settings[this.type]?this.activeLayer.settings[this.type]:{}},isActive(e,t){let i=this.activeLayerValue();return!!(i&&i[e]&&t===i[e])},getValue(e){let t=this.activeLayerValue();return t&&t[e]?t[e]:""},getTransformValue(e,t){let i=this.activeLayerValue();return i&&i[e]&&i[e][t]?i[e][t]:""},setValue(e,t){this.transform=this.activeLayerValue(),this.transform[e]=t,this.updateSettings(this.activeViewId,this.transform)},setTransformValue(e,t,i){this.transform=this.activeLayerValue()||{},this.transform[e]=this.transform[e]||{},this.transform[e][t]=i,this.updateSettings(this.activeViewId,this.transform)}}},Si=window.Vue.toDisplayString,w=window.Vue.createElementVNode,ww=window.Vue.renderList,_w=window.Vue.Fragment,_e=window.Vue.openBlock,ve=window.Vue.createElementBlock,Vt=window.Vue.createCommentVNode,Ai=window.Vue.normalizeClass,vw=["for"],yw={class:"wpc-title"},gw={class:"wpc-select-input-wrap"},mw=w("label",null,"Transform Type:",-1),fw=["value","selected"],$w={key:0,class:"wpc-text-input-wrap"},Vw=w("label",null,"Skew:",-1),Lw={class:"wpc-text-input-fields-group"},kw=w("span",null,"X:",-1),bw=["value"],Cw=w("span",null,"Y:",-1),Tw=["value"],Ew={key:1,class:"wpc-text-input-wrap"},Sw=w("label",null,"Perspective: (px)",-1),Aw={class:"wpc-text-input-fields-group"},Nw=["value"],xw={key:2,class:"wpc-text-input-wrap"},Bw=w("label",null,"Rotate: (deg)",-1),Ow={class:"wpc-text-input-fields-group"},Dw=["value"],Iw={key:3,class:"wpc-text-input-wrap"},zw=w("label",null,"Rotate:",-1),Fw={class:"wpc-text-input-fields-group"},Pw=w("span",null,"X:",-1),Yw=["value"],Hw=w("span",null,"Y:",-1),Rw=["value"],Mw=w("span",null,"Z:",-1),Xw=["value"];function jw(e,t,i,r,a,s){return _e(),ve("div",{class:Ai(["wpce-group-field wpc-type-transform",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[w("label",{class:"wpc-title-set",for:e.control.support_view?"":e.type},[w("span",yw,Si(e.control.name),1)],8,vw),w("div",{class:Ai(["wpc-input-element",e.control.class])},[w("div",gw,[mw,w("select",{autocomplete:"off",onChange:t[0]||(t[0]=o=>s.setValue("type",o.target.value))},[(_e(!0),ve(_w,null,ww(a.transformType,(o,n,l)=>(_e(),ve("option",{key:o,value:n,selected:s.isActive("type",n)},Si(o),9,fw))),128))],32)]),s.isType("2d")?(_e(),ve("div",$w,[Vw,w("div",Lw,[w("p",null,[kw,w("input",{type:"text",value:s.getTransformValue("skew","x"),onChange:t[1]||(t[1]=o=>s.setTransformValue("skew","x",o.target.value)),autocomplete:"off"},null,40,bw)]),w("p",null,[Cw,w("input",{type:"text",value:s.getTransformValue("skew","y"),onChange:t[2]||(t[2]=o=>s.setTransformValue("skew","y",o.target.value)),autocomplete:"off"},null,40,Tw)])])])):Vt("",!0),s.isType("3d")?(_e(),ve("div",Ew,[Sw,w("div",Aw,[w("p",null,[w("input",{type:"text",value:s.getValue("perspective"),onChange:t[3]||(t[3]=o=>s.setValue("perspective",o.target.value)),autocomplete:"off"},null,40,Nw)])])])):Vt("",!0),s.isType("2d")?(_e(),ve("div",xw,[Bw,w("div",Ow,[w("p",null,[w("input",{type:"text",value:s.getValue("rotate"),onChange:t[4]||(t[4]=o=>s.setValue("rotate",o.target.value)),autocomplete:"off"},null,40,Dw)])])])):Vt("",!0),s.isType("3d")?(_e(),ve("div",Iw,[zw,w("div",Fw,[w("p",null,[Pw,w("input",{type:"text",value:s.getTransformValue("rotate3d","x"),onChange:t[5]||(t[5]=o=>s.setTransformValue("rotate3d","x",o.target.value)),autocomplete:"off"},null,40,Yw)]),w("p",null,[Hw,w("input",{type:"text",value:s.getTransformValue("rotate3d","y"),onChange:t[6]||(t[6]=o=>s.setTransformValue("rotate3d","y",o.target.value)),autocomplete:"off"},null,40,Rw)]),w("p",null,[Mw,w("input",{type:"text",value:s.getTransformValue("rotate3d","z"),onChange:t[7]||(t[7]=o=>s.setTransformValue("rotate3d","z",o.target.value)),autocomplete:"off"},null,40,Xw)])])])):Vt("",!0)],2)],2)}var Uw=h(hw,[["render",jw]]);let Ni;const Ww={mixins:[b],components:{ColorPicker:qe},data(){return{fontLists:{0:"Select Font",open_sans:"Open Sans",poppins:"Poppins",lato:"Lato"},fontWeight:{100:"100",300:"300",400:"400",600:"600",700:"700",900:"900"},textAlign:{left:"format_align_left",center:"format_align_center",justify:"format_align_justify",right:"format_align_right"},textTransform:{initial:"Initial",uppercase:"Uppercase",lowercase:"Lowercase",capitalize:"Capitalize"},showPicker:!1}},methods:{isAllowed(e){return this.control.allowed_settings&&this.control.allowed_settings.includes(e)},getValue(e){return this.value&&this.value[e]?this.value[e]:""},setValue(e,t){this.typography=this.value||{},this.typography[e]=t,this.updateSettings("",this.typography)},isActive(e,t){return!!(this.value&&this.value[e]&&t===this.value[e])},changeColor(e){const{r:t,g:i,b:r,a}=e.rgba;e=`rgba(${t}, ${i}, ${r}, ${a})`,clearTimeout(Ni),Ni=setTimeout(()=>{this.setValue("color",e)},300)}}},Ge=window.Vue.toDisplayString,g=window.Vue.createElementVNode,Lt=window.Vue.renderList,kt=window.Vue.Fragment,f=window.Vue.openBlock,V=window.Vue.createElementBlock,F=window.Vue.createCommentVNode,Gw=window.Vue.normalizeStyle,Kw=window.Vue.resolveComponent,Jw=window.Vue.createBlock,qw=window.Vue.withModifiers,Qt=window.Vue.normalizeClass,Zw=["for"],Qw={class:"wpc-title"},e_={key:0,class:"wpc-select-input-wrap"},t_=g("label",null,"Font Family:",-1),s_=["value","selected"],i_={key:1,class:"wpc-text-input-wrap"},o_=g("label",null,"Font Size:",-1),a_=["value"],n_={key:2,class:"wpc-select-input-wrap"},r_=g("label",null,"Font Weight:",-1),l_=["value","selected"],c_={key:3,class:"wpc-text-input-wrap"},d_=g("label",null,"Line Height:",-1),p_=["value"],u_={key:4,class:"wpc-text-input-wrap"},h_=g("label",null,"Letter Spacing:",-1),w_=["value"],__={key:5,class:"wpc-select-input-wrap"},v_=g("label",null,"Text Transform:",-1),y_=["value","selected"],g_={key:6,class:"wpc-color-input-parent-wrap"},m_=g("label",null,"Color:",-1),f_={class:"wpc-color-input-wrap"},$_={class:"wpc-choosen-color-wrap"},V_=["id","value"],L_={key:7,class:"wpc-icon-switch-wrap"},k_=g("label",null,"Text Align:",-1),b_=["onClick"];function C_(e,t,i,r,a,s){const o=Kw("ColorPicker");return f(),V("div",{class:Qt(["wpce-group-field wpc-type-typography",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[g("label",{class:"wpc-title-set",for:e.type},[g("span",Qw,Ge(e.control.name),1)],8,Zw),g("div",{class:Qt(["wpc-input-element",e.control.class])},[s.isAllowed("font-family")?(f(),V("div",e_,[t_,g("select",{autocomplete:"off",onChange:t[0]||(t[0]=n=>s.setValue("font_family",n.target.value))},[(f(!0),V(kt,null,Lt(a.fontLists,(n,l,p)=>(f(),V("option",{key:n,value:l,selected:s.isActive("font_family",l)},Ge(n),9,s_))),128))],32)])):F("",!0),s.isAllowed("size")?(f(),V("div",i_,[o_,g("input",{type:"text",value:s.getValue("size"),onChange:t[1]||(t[1]=n=>s.setValue("size",n.target.value)),autocomplete:"off"},null,40,a_)])):F("",!0),s.isAllowed("font-weight")?(f(),V("div",n_,[r_,g("select",{autocomplete:"off",onChange:t[2]||(t[2]=n=>s.setValue("font_weight",n.target.value))},[(f(!0),V(kt,null,Lt(a.fontWeight,(n,l,p)=>(f(),V("option",{key:n,value:l,selected:s.isActive("font_weight",n)},Ge(n),9,l_))),128))],32)])):F("",!0),s.isAllowed("line-height")?(f(),V("div",c_,[d_,g("input",{type:"text",value:s.getValue("line_height"),onChange:t[3]||(t[3]=n=>s.setValue("line_height",n.target.value)),autocomplete:"off"},null,40,p_)])):F("",!0),s.isAllowed("letter-spacing")?(f(),V("div",u_,[h_,g("input",{type:"text",value:s.getValue("letter_spacing"),onChange:t[4]||(t[4]=n=>s.setValue("letter_spacing",n.target.value)),autocomplete:"off"},null,40,w_)])):F("",!0),s.isAllowed("text-transform")?(f(),V("div",__,[v_,g("select",{autocomplete:"off",onChange:t[5]||(t[5]=n=>s.setValue("text_transform",n.target.value))},[(f(!0),V(kt,null,Lt(a.textTransform,(n,l,p)=>(f(),V("option",{key:n,value:l,selected:s.isActive("font_family",l)},Ge(n),9,y_))),128))],32)])):F("",!0),s.isAllowed("color")?(f(),V("div",g_,[m_,g("div",f_,[g("div",$_,[g("div",{class:"wpc-choosen-color",style:Gw({backgroundColor:s.getValue("color")})},null,4)]),g("input",{class:"wpc-color-input",type:"text",id:e.type,value:s.getValue("color"),onClick:t[6]||(t[6]=n=>a.showPicker=!a.showPicker),onInput:t[7]||(t[7]=n=>s.setValue("color",n.target.value)),autocomplete:"off"},null,40,V_),a.showPicker?(f(),Jw(o,{key:0,color:s.getValue("color"),"sucker-hide":!0,onChangeColor:t[8]||(t[8]=n=>s.changeColor(n))},null,8,["color"])):F("",!0),a.showPicker?(f(),V("span",{key:1,class:"material-icons",onClick:t[9]||(t[9]=qw(n=>a.showPicker=!1,["stop"]))},"clear")):F("",!0)])])):F("",!0),s.isAllowed("text-align")?(f(),V("div",L_,[k_,(f(!0),V(kt,null,Lt(a.textAlign,(n,l,p)=>(f(),V("span",{class:Qt(["material-icons",{"wpc-icon-active":s.isActive("text_align",l)}]),key:n,onClick:N=>s.setValue("text_align",l)},Ge(n),11,b_))),128))])):F("",!0)],2)],2)}var T_=h(Ww,[["render",C_]]);const E_={mixins:[b],computed:{activeLayer(){return this.$store.state.activeLayer}},methods:{setValue(e,t){if(e){let i=e&&e.id?e.id:"";this.updateSettings(i,t)}else this.value=t},isActive(e,t){if(e){let i=e&&e.id?e.id:"";return(this.activeLayer.settings&&this.activeLayer.settings.views&&this.activeLayer.settings.views[i]&&this.activeLayer.settings.views[i][this.type]?this.activeLayer.settings.views[i][this.type]:"")===t}else return t===this.value||this.control.default&&t===this.control.default}}},es=window.Vue.toDisplayString,xi=window.Vue.createElementVNode,ts=window.Vue.renderList,ss=window.Vue.Fragment,ne=window.Vue.openBlock,re=window.Vue.createElementBlock,Ke=window.Vue.normalizeClass;window.Vue.createCommentVNode;const S_=["for"],A_={class:"wpc-title"},N_=["onClick"],x_=["onClick"];function B_(e,t,i,r,a,s){return ne(),re("div",{class:Ke(["wpce-group-field",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[xi("label",{class:"wpc-title-set",for:e.control.support_view?"":e.type},[xi("span",A_,es(e.control.name),1)],8,S_),e.control.support_view?(ne(!0),re(ss,{key:1},ts(e.$store.state.views,o=>(ne(),re("div",{class:Ke(["wpc-icon-switch-wrap",e.control.class]),key:o.id},[(ne(!0),re(ss,null,ts(e.control.options,(n,l,p)=>(ne(),re("span",{class:Ke(["material-icons",{"wpc-icon-active":s.isActive(o,l)}]),key:n,onClick:N=>s.setValue(o,l)},es(n),11,x_))),128))],2))),128)):(ne(),re("div",{key:0,class:Ke(["wpc-icon-switch-wrap",e.control.class])},[(ne(!0),re(ss,null,ts(e.control.options,(o,n,l)=>(ne(),re("span",{class:Ke(["material-icons",{"wpc-icon-active":s.isActive("",n)}]),key:o,onClick:p=>s.setValue("",n)},es(o),11,N_))),128))],2))],2)}var O_=h(E_,[["render",B_]]);const D_={mixins:[b],data(){return{fontLists:wpc.editor.allowed_fonts,selectedFonts:[],showPreset:!1}},computed:{activeLayer(){return this.$store.state.activeLayer}},methods:{openFontPreset(){this.showPreset=!this.showPreset},toggleFont(e){if(this.selectedFonts=this.value||[],!this.selectedFonts.includes(e))this.selectedFonts.push(e);else{let t=this.value.findIndex(i=>i===e);this.selectedFonts.splice(t,1)}this.value=this.selectedFonts},setDefaultPresetFont(e){this.activeLayer.settings.font_family=e,this.activeLayer.settings.default_font=e},isActive(e){return this.activeLayer.settings&&this.activeLayer.settings.font_family&&this.activeLayer.settings.font_family===e},isInThePreset(e){return Array.isArray(this.value)&&this.value.includes(e)}}},is=window.Vue.toDisplayString,M=window.Vue.createElementVNode,Bi=window.Vue.renderList,Oi=window.Vue.Fragment,ye=window.Vue.openBlock,ge=window.Vue.createElementBlock,os=window.Vue.withModifiers,Di=window.Vue.createTextVNode,bt=window.Vue.normalizeClass,Ii=window.Vue.createCommentVNode,I_=["for"],z_={class:"wpc-title"},F_={class:"wpc-font-preset-wrap"},P_={class:"wpc-font-preset-inner"},Y_=["onClick"],H_=["onClick"],R_={key:0,class:"wpc-font-preset-lists"},M_=["onClick"],X_=M("span",{class:"wpc-check-box-wrap"},[M("span",{class:"wpc-check-box material-icons"},"check")],-1);function j_(e,t,i,r,a,s){return ye(),ge("div",{class:bt(["wpce-group-field wpc-type-font-preset",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[M("label",{class:"wpc-title-set",for:e.control.support_view?"":e.type},[M("span",z_,is(e.control.name),1)],8,I_),e.control.support_view?Ii("",!0):(ye(),ge("div",{key:0,class:bt(["wpc-input-element",e.control.class])},[M("div",F_,[M("div",P_,[M("div",{class:"wpc-font-preset",onClick:t[0]||(t[0]=os((...o)=>s.openFontPreset&&s.openFontPreset(...o),["self"]))},[(ye(!0),ge(Oi,null,Bi(e.value,o=>(ye(),ge("div",{class:bt({"wpc-active-font":s.isActive(o)}),onClick:n=>s.setDefaultPresetFont(o)},[Di(is(o)+" ",1),M("span",{class:"material-icons",onClick:os(n=>s.toggleFont(o),["stop"])},"close ",8,H_)],10,Y_))),256))])]),a.showPreset?(ye(),ge("div",R_,[M("ul",null,[(ye(!0),ge(Oi,null,Bi(a.fontLists,(o,n)=>(ye(),ge("li",{onClick:os(l=>s.toggleFont(o),["stop"]),class:bt({"wpc-check-box-active":s.isInThePreset(o)})},[X_,Di(" "+is(o),1)],10,M_))),256))])])):Ii("",!0)])],2))],2)}var U_=h(D_,[["render",j_]]);const W_=window.Vue.nextTick;let zi;const G_={mixins:[b],components:{ColorPicker:qe},data(){return{colorPreset:[],selectedColors:[],showPicker:!1,currentColor:"",editIndex:""}},computed:{activeLayer(){return this.$store.state.activeLayer}},methods:{changeColor(e){const{r:t,g:i,b:r,a}=e.rgba;e=`rgba(${t}, ${i}, ${r}, ${a})`,clearTimeout(zi),zi=setTimeout(()=>{this.selectedColors=this.value||[],this.editIndex===""?this.selectedColors.includes(e)||this.selectedColors.push(e):(this.selectedColors[this.editIndex]=e,this.editIndex=""),this.value=this.selectedColors,this.showPicker=!1},300)},editColor(e){this.showPicker=!1,this.currentColor=this.value[e],W_(()=>{this.showPicker=!0,this.editIndex=e})},deleteColor(e){let t=this.value[e];this.$store.state.activeLayer.settings.color===t&&this.setDefaultPresetColor(""),this.value.splice(e,1)},setDefaultPresetColor(e){this.$store.state.activeLayer.settings.default_color=e,this.$store.state.activeLayer.settings.color=e},isActive(e){return this.activeLayer.settings&&this.activeLayer.settings.color&&this.activeLayer.settings.color===e}}},K_=window.Vue.toDisplayString,P=window.Vue.createElementVNode,J_=window.Vue.renderList,q_=window.Vue.Fragment,Je=window.Vue.openBlock,Ct=window.Vue.createElementBlock,Tt=window.Vue.withModifiers,as=window.Vue.normalizeClass,Z_=window.Vue.normalizeStyle,Q_=window.Vue.resolveComponent,ev=window.Vue.createBlock,Fi=window.Vue.createCommentVNode,tv=["for"],sv={class:"wpc-title"},iv={class:"wpc-color-preset-wrap"},ov={class:"wpc-color-preset"},av=["onClick"],nv=["onClick"],rv=["onClick"],lv={class:"wpce-close-color-wrap"},cv={class:"wpce-add-color-preset"};function dv(e,t,i,r,a,s){const o=Q_("ColorPicker");return Je(),Ct("div",{class:as(["wpce-group-field wpc-type-color-preset",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[P("label",{class:"wpc-title-set",for:e.control.support_view?"":e.type},[P("span",sv,K_(e.control.name),1)],8,tv),P("div",{class:as(["wpc-input-element",e.control.class])},[P("div",iv,[P("div",ov,[(Je(!0),Ct(q_,null,J_(e.value,(n,l)=>(Je(),Ct("div",{class:as(["wpc-choosen-color",{"wpc-active-color":s.isActive(n)}]),style:Z_({backgroundColor:n}),onClick:Tt(p=>s.setDefaultPresetColor(n),["stop"])},[P("span",{class:"wpc-edit-color-icon material-icons",onClick:Tt(p=>s.editColor(l),["stop"])},"edit",8,nv),P("span",{class:"wpc-remove-color-icon material-icons",onClick:Tt(p=>s.deleteColor(l),["stop"])},"close",8,rv)],14,av))),256))]),P("div",lv,[a.showPicker?(Je(),ev(o,{key:0,color:a.currentColor,"sucker-hide":!0,onChangeColor:t[0]||(t[0]=n=>s.changeColor(n,""))},null,8,["color"])):Fi("",!0),a.showPicker?(Je(),Ct("span",{key:1,class:"wpce-close-color-icon material-icons",onClick:t[1]||(t[1]=Tt(n=>a.showPicker=!1,["stop"]))},"clear")):Fi("",!0)]),P("div",cv,[P("span",{class:"material-icons",onClick:t[2]||(t[2]=n=>a.showPicker=!0)},"add_circle")])])],2)],2)}var pv=h(G_,[["render",dv]]);const uv={mixins:[b],data(){return{placeHolder:""}},methods:{activeLayerValue(){return this.control.support_view?this.activeLayer.settings&&this.activeLayer.settings.views&&this.activeLayer.settings.views[this.activeViewId]&&this.activeLayer.settings.views[this.activeViewId][this.type]?this.activeLayer.settings.views[this.activeViewId][this.type]:[]:this.activeLayer.settings&&this.activeLayer.settings&&this.activeLayer.settings[this.type]?this.activeLayer.settings[this.type]:[]},setValue(e){let t=this.activeLayerValue();t.indexOf(e)===-1&&t.push(e),this.updateSettings(null,t),this.placeHolder=""},removeVal(e){let t=this.activeLayerValue(),i=t.findIndex(r=>r===e);t.splice(i,1),this.updateSettings(null,t)}}},Pi=window.Vue.toDisplayString,me=window.Vue.createElementVNode,hv=window.Vue.renderList,wv=window.Vue.Fragment,ns=window.Vue.openBlock,rs=window.Vue.createElementBlock,_v=window.Vue.createTextVNode,Yi=window.Vue.normalizeClass,vv=["for"],yv={class:"wpc-title"},gv={class:"wpce-multi-text-inner"},mv={class:"wpce-multi-text-selected-lists"},fv={class:"wpce-multi-text-selected-list"},$v=["onClick"],Vv=["id","value"];function Lv(e,t,i,r,a,s){return ns(),rs("div",{class:Yi(["wpce-group-field",["wpc-type-"+e.type,e.control.separator==!1?"wpc-sep-hide":""]])},[me("label",{class:"wpc-title-set",for:e.control.support_view?"":e.type},[me("span",yv,Pi(e.control.name),1)],8,vv),me("div",{class:Yi(["wpc-input-element",e.control.class])},[me("div",gv,[me("div",mv,[(ns(!0),rs(wv,null,hv(e.value,o=>(ns(),rs("span",fv,[_v(Pi(o)+" ",1),me("span",{class:"material-icons",onClick:n=>s.removeVal(o)},"close",8,$v)]))),256))]),me("input",{class:"wpc-text",type:"text",id:e.type,value:a.placeHolder,onChange:t[0]||(t[0]=o=>s.setValue(o.target.value)),autocomplete:"off"},null,40,Vv)])],2)],2)}var kv=h(uv,[["render",Lv]]);const bv=window.Vue.createApp;xp();const v=bv(Fd);wpcEditorUtils.do_action("wpcBeforeEditorInit",v);v.use(qs);v.use(ji);v.component("layers",Gd);v.component("Layer",bp);v.component("draggable",di);v.component("checkboxControl",Xp);v.component("colorControl",au);v.component("layerTypeControl",gu);v.component("fancySelectControl",Du);v.component("mediaControl",th);v.component("selectControl",uh);v.component("textControl",Vh);v.component("textareaControl",Nh);v.component("viewControl",Xh);v.component("textShadowControl",uw);v.component("transformControl",Uw);v.component("typographyControl",T_);v.component("iconSwitchControl",O_);v.component("fontPresetControl",U_);v.component("colorPresetControl",pv);v.component("multiTextControl",kv);window.wpcEditor=v;wpcEditorUtils.do_action("wpcEditorBeforeMount",v);v.mount("#wpc-editor");window.wpcEditorGetStore=()=>qs;
